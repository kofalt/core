{
  "swagger": "2.0",
  "info": {
    "version": "swagger-pr-tag-test",
    "title": "SciTran"
  },
  "host": "dev.flywheel.io",
  "basePath": "/api",
  "schemes": [
    "https"
  ],
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "tags": [
    {
      "name": "files",
      "description": "File upload/download operations"
    },
    {
      "name": "devices",
      "description": "Device operations"
    },
    {
      "name": "users",
      "description": "User operations"
    },
    {
      "name": "gears",
      "description": "Gear operations"
    },
    {
      "name": "groups",
      "description": "Group operations"
    },
    {
      "name": "jobs",
      "description": "Job operations"
    },
    {
      "name": "collections",
      "description": "Collection operations"
    },
    {
      "name": "sessions",
      "description": "Session operations"
    },
    {
      "name": "acquisitions",
      "description": "Acquisition operations"
    },
    {
      "name": "projects",
      "description": "Project operations"
    },
    {
      "name": "reports",
      "description": "Site-wide reports"
    },
    {
      "name": "batch",
      "description": "Batch job operations"
    }
  ],
  "paths": {
    "/login": {
      "post": {
        "summary": "Login",
        "description": "Scitran Authentication",
        "operationId": "login",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "success": true
              }
            }
          }
        }
      }
    },
    "/logout": {
      "post": {
        "summary": "Log Out",
        "description": "Remove authtokens for user",
        "operationId": "logout",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "auth_tokens_removed": 2
              }
            }
          }
        }
      }
    },
    "/download": {
      "post": {
        "summary": "Create a download ticket",
        "description": "Use filters in the payload to exclude/include files.\nTo pass a single filter, each of its conditions should be satisfied.\nIf a file pass at least one filter, it is included in the targets.\n",
        "operationId": "create_download_ticket",
        "tags": [
          "files"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "ticket": "579e97738120be2ada087feb",
                "file_cnt": 3,
                "size": 64523904
              }
            }
          }
        },
        "parameters": [
          {
            "in": "query",
            "type": "string",
            "name": "prefix",
            "description": "A string to customize the name of the download\nin the format <prefix>_<timestamp>.tar.gz.\nDefaults to \"scitran\".\n"
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "example": {
                "optional": true,
                "nodes": [
                  {
                    "level": "project",
                    "_id": "57abe1589e512c513d42cb83"
                  }
                ],
                "filters": [
                  {
                    "tags": {
                      "+": [
                        "incomplete"
                      ]
                    },
                    "types": {
                      "+": [
                        "dicom"
                      ]
                    }
                  }
                ]
              },
              "title": "Download",
              "type": "object",
              "properties": {
                "optional": {
                  "type": "boolean"
                },
                "nodes": {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "$ref": "#/definitions/download-node"
                  }
                },
                "filters": {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "$ref": "#/definitions/download-filter"
                  }
                }
              },
              "required": [
                "optional",
                "nodes"
              ],
              "additionalProperties": false
            },
            "description": "Download files with tag 'incomplete' OR type 'dicom'"
          }
        ]
      },
      "get": {
        "summary": "Download files listed in the given ticket.",
        "description": "You can use POST to create a download ticket\nThe files listed in the ticket are put into a tar archive,\nwhich is then compressed with gzip (.tar.gz)\n",
        "operationId": "download_ticket",
        "tags": [
          "files"
        ],
        "parameters": [
          {
            "required": true,
            "description": "ID of the download ticket",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "produces": [
          "application/octet-stream"
        ],
        "responses": {
          "200": {
            "description": "The requested tarball download as a binary stream"
          },
          "400": {
            "description": "Ticket not for this source IP"
          },
          "404": {
            "description": "No such ticket"
          }
        }
      }
    },
    "/upload/label": {
      "post": {
        "summary": "Multipart form upload with N file fields, each with their desired filename.",
        "description": "For technical reasons, no form field names can be repeated. Instead, use (file1, file2) and so forth.\nA non-file form field called \"metadata\" is also required, which must be a string containing JSON.\nSee api/schemas/input/labelupload.json for the format of this metadata.\n",
        "operationId": "upload_by_label",
        "tags": [
          "files"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          },
          "402": {
            "description": "Uploads must be from an authorized drone"
          }
        },
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ]
      }
    },
    "/upload/uid": {
      "post": {
        "summary": "Multipart form upload with N file fields, each with their desired filename.",
        "description": "Same behavior as /api/upload/label,\n except the metadata field must be uid format\n See api/schemas/input/uidupload.json for the format of this metadata.\n",
        "operationId": "upload_by_uid",
        "tags": [
          "files"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          },
          "402": {
            "description": "Uploads must be from an authorized drone"
          }
        },
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ]
      }
    },
    "/upload/uid-match": {
      "post": {
        "summary": "Multipart form upload with N file fields, each with their desired filename.",
        "description": "Accepts uploads to an existing data hierarchy, matched via Session\nand Acquisition UID\nSee api/schemas/input/uidmatchupload.json for the format of this metadata.\n",
        "operationId": "upload_match_uid",
        "tags": [
          "files"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          },
          "402": {
            "description": "Uploads must be from an authorized drone"
          },
          "404": {
            "description": "Session or Acquisition with uid does not exist"
          }
        },
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ]
      }
    },
    "/clean-packfiles": {
      "post": {
        "summary": "Clean up expired upload tokens and invalid token directories.",
        "operationId": "clean_packfiles",
        "responses": {
          "200": {
            "description": "Expired and invalid tokens have been cleaned",
            "schema": {
              "example": {
                "tokens": 5,
                "directories": 3
              }
            }
          }
        }
      }
    },
    "/engine": {
      "post": {
        "summary": "Upload a list of file fields.",
        "description": "### Default behavior:\n >Uploads a list of file fields sent as file1, file2, etc to an existing\n  container and updates fields of the files, the container and it's\n  parents as specified in the metadata fileformfield using the\n  engine placer class\n\n### When ``level`` is ``analysis``:\n> Uploads a list of files to an existing analysis object, marking\n  all files as ``output=true`` using the job-based analyses placer\n  class.  See schemas/input/analysis.json\n",
        "operationId": "engine_upload",
        "responses": {
          "200": {
            "description": "A list of FileInfo objects",
            "schema": {
              "example": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          }
        },
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Object encoded as a JSON string.\nBy default JSON must match the specified enginemetadata.json schema\nIf ``level`` is ``analysis``, JSON must match AnalysisUploadMetadata schema\n",
            "schema": {
              "$ref": "#/definitions/enginemetadata-engine-upload-input"
            }
          },
          {
            "required": true,
            "description": "Which level to store files in",
            "enum": [
              "project",
              "session",
              "acquisition",
              "analysis"
            ],
            "type": "string",
            "in": "query",
            "name": "level"
          },
          {
            "required": true,
            "description": "The ID of the container to place files in",
            "type": "string",
            "in": "query",
            "name": "id"
          },
          {
            "description": "Required if ``level`` is ``analysis``",
            "type": "string",
            "in": "query",
            "name": "job",
            "required": true
          }
        ]
      }
    },
    "/config": {
      "get": {
        "summary": "Return public Scitran configuration information",
        "operationId": "get_config",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/config-output"
            },
            "examples": {
              "response": {
                "site": {
                  "central_url": "https://sdmc.scitran.io/api",
                  "ssl_cert": null,
                  "api_url": "https://10.240.0.2:443/api",
                  "registered": false,
                  "id": "local",
                  "name": "BaliDemo"
                },
                "modified": "2016-03-31T16:30:00.852000+00:00",
                "auth": {
                  "id_endpoint": "https://www.googleapis.com/plus/v1/people/me/openIdConnect",
                  "verify_endpoint": "https://www.googleapis.com/oauth2/v1/tokeninfo",
                  "client_id": "949263322061-6q4fqi0m4ihkp1v5n6v8q9bef4gd0f1k.apps.googleusercontent.com",
                  "auth_endpoint": "https://accounts.google.com/o/oauth2/auth"
                },
                "created": "2016-03-31T16:30:00.852000+00:00"
              }
            }
          }
        }
      }
    },
    "/config.js": {
      "get": {
        "summary": "Return public Scitran configuration information in javascript format.",
        "operationId": "get_config_js",
        "produces": [
          "text/html"
        ],
        "responses": {
          "200": {
            "description": "",
            "examples": {
              "application/javascript": "config = {\n      \"auth\": {\n          \"auth_endpoint\": \"https://accounts.google.com/o/oauth2/auth\",\n          \"client_id\": \"949263322061-6q4fqi0m4ihkp1v5n6v8q9bef4gd0f1k.apps.googleusercontent.com\",\n          \"id_endpoint\": \"https://www.googleapis.com/plus/v1/people/me/openIdConnect\",\n          \"verify_endpoint\": \"https://www.googleapis.com/oauth2/v1/tokeninfo\"\n      },\n      \"created\": \"2016-03-31T16:30:00.852000+00:00\",\n      \"modified\": \"2016-03-31T16:30:00.852000+00:00\",\n      \"site\": {\n          \"api_url\": \"https://10.240.0.2:443/api\",\n          \"central_url\": \"https://sdmc.scitran.io/api\",\n          \"id\": \"local\",\n          \"name\": \"BaliDemo\",\n          \"registered\": false,\n          \"ssl_cert\": null\n      } \n"
            }
          }
        }
      }
    },
    "/version": {
      "get": {
        "summary": "Get server and database schema version info",
        "operationId": "get_version",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/version-output"
            },
            "examples": {
              "response": {
                "_id": "version",
                "database": 2
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "summary": "Return a list of all users",
        "operationId": "get_all_users",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/user-output"
                  }
                ],
                "required": [
                  "_id",
                  "firstname",
                  "lastname",
                  "root",
                  "email",
                  "created",
                  "modified"
                ]
              },
              "example": {
                "0": {
                  "_id": "jane.doe@gmail.com",
                  "firstname": "Jane",
                  "lastname": "Doe",
                  "email": "jane.doe@gmail.com",
                  "root": true,
                  "created": "2016-09-02T22:58:18.624000+00:00",
                  "modified": "2016-09-02T22:58:18.624000+00:00"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add a new user",
        "operationId": "add_user",
        "tags": [
          "users"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/user-input"
                }
              ],
              "required": [
                "_id",
                "firstname",
                "lastname"
              ],
              "example": {
                "_id": "jane.doe@gmail.com",
                "firstname": "Jane",
                "lastname": "Doe",
                "email": "jane.doe@gmail.com",
                "root": false
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The user was created sucessfully",
            "schema": {
              "example": {
                "_id": "jane.doe@gmail.com"
              },
              "type": "object",
              "properties": {
                "_id": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/users/self": {
      "get": {
        "summary": "Get information about the current user",
        "operationId": "get_current_user",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/user-output-api-key"
            },
            "examples": {
              "response": {
                "_id": "jane.doe@gmail.com",
                "firstname": "Jane",
                "lastname": "Doe",
                "email": "jane.doe@gmail.com",
                "root": false,
                "created": "2016-09-02T22:58:18.624000+00:00",
                "modified": "2016-09-02T22:58:18.624000+00:00"
              }
            }
          }
        }
      }
    },
    "/users/self/avatar": {
      "get": {
        "summary": "Get the avatar of the current user",
        "operationId": "get_current_user_avatar",
        "tags": [
          "users"
        ],
        "responses": {
          "307": {
            "description": "Redirects to the image file of the current user's avatar\n"
          }
        }
      }
    },
    "/users/{UserId}": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "UserId",
          "required": true
        }
      ],
      "get": {
        "summary": "Get information about the specified user",
        "operationId": "get_user",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/user-output"
                },
                {
                  "required": [
                    "_id",
                    "firstname",
                    "lastname",
                    "root",
                    "email",
                    "created",
                    "modified"
                  ]
                }
              ]
            },
            "examples": {
              "response": {
                "_id": "jane.doe@gmail.com",
                "firstname": "Jane",
                "lastname": "Doe",
                "email": "jane.doe@gmail.com",
                "root": false,
                "created": "2016-09-02T22:58:18.624000+00:00",
                "modified": "2016-09-02T22:58:18.624000+00:00"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update the specified user",
        "operationId": "modify_user",
        "tags": [
          "users"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "firstname": "Jane",
                "lastname": "Smith",
                "email": "jane.smith@gmail.com"
              },
              "type": "object",
              "properties": {
                "_id": {
                  "type": "string",
                  "format": "email"
                },
                "firstname": {
                  "maxLength": 64,
                  "minLength": 1,
                  "title": "First Name",
                  "type": "string"
                },
                "lastname": {
                  "maxLength": 64,
                  "minLength": 1,
                  "title": "Last Name",
                  "type": "string"
                },
                "email": {
                  "format": "email",
                  "title": "Email",
                  "type": "string"
                },
                "avatar": {
                  "format": "uri",
                  "title": "Avatar",
                  "type": "string"
                },
                "avatars": {
                  "$ref": "#/definitions/avatars"
                },
                "root": {
                  "type": "boolean"
                },
                "disabled": {
                  "type": "boolean"
                },
                "preferences": {
                  "$ref": "#/definitions/user-preferences"
                },
                "wechat": {
                  "$ref": "#/definitions/user-wechat"
                },
                "firstlogin": {
                  "type": "string"
                },
                "lastlogin": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "description": "Accepts an object matching the User type except all fields are optional\n"
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the number of users modified",
            "schema": {
              "$ref": "#/definitions/common-modified-count"
            },
            "examples": {
              "response": {
                "modified": 1
              }
            }
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a user",
        "operationId": "delete_user",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "User was deleted",
            "schema": {
              "$ref": "#/definitions/common-deleted-count"
            },
            "examples": {
              "response": {
                "deleted": 3
              }
            }
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/users/{UserId}/groups": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "List all groups the specified user is a member of",
        "operationId": "get_user_groups",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/group-output-list"
            },
            "examples": {
              "response": [
                {
                  "label": "Test Group",
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "group_admin@fakeuser.com"
                    },
                    {
                      "access": "rw",
                      "_id": "group_member_read-write@fakeuser.com"
                    },
                    {
                      "access": "ro",
                      "_id": "group_member_read-only@fakeuser.com"
                    }
                  ],
                  "created": "2016-08-19T11:41:15.360000+00:00",
                  "modified": "2016-08-19T11:41:15.360000+00:00",
                  "_id": "test_group"
                }
              ]
            }
          }
        }
      }
    },
    "/users/{UserId}/avatar": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "Get the avatar of the specified user",
        "operationId": "get_user_avatar",
        "tags": [
          "users"
        ],
        "responses": {
          "307": {
            "description": "Redirects to the image file of the specified user's avatar\n"
          }
        }
      }
    },
    "/users/{UserId}/acquisitions": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "Get all acquisitions that belong to the given user.",
        "operationId": "get_user_acquisitions",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/acquisition-output"
                  }
                ],
                "required": [
                  "_id",
                  "public",
                  "label",
                  "session",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "files": [
                    {
                      "origin": {
                        "method": "importer",
                        "type": "device",
                        "id": "importer_Admin_Import",
                        "name": "Admin Import"
                      },
                      "mimetype": "application/zip",
                      "measurements": [],
                      "hash": "v0-sha384-dd3c97bfe0ad1fcba75ae6718c6e81038c59af4f447f5db194d52732efa4f955b28455db02eb64cad3e4e55f11e3679f",
                      "name": "4784_1_1_localizer_dicom.zip",
                      "tags": [],
                      "created": "2016-09-21T14:56:09.943000+00:00",
                      "modified": "2016-09-21T14:56:09.943000+00:00",
                      "modality": null,
                      "info": {},
                      "type": "dicom",
                      "size": 989933
                    }
                  ],
                  "created": "2016-09-21T14:56:10.026000+00:00",
                  "timestamp": "2016-09-21T19:24:45.539570+00:00",
                  "modified": "2016-09-21T14:56:10.026000+00:00",
                  "label": "4784_1_1_localizer",
                  "session": "57e29f8afab726000f7ec6b1",
                  "collections": [
                    "57e2a026675ca0000f0eeb0c"
                  ],
                  "_id": "57e29f8afab726000f7ec6b2",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "files": [
                    {
                      "origin": {
                        "method": "importer",
                        "type": "device",
                        "id": "importer_Admin_Import",
                        "name": "Admin Import"
                      },
                      "mimetype": "application/zip",
                      "measurements": [],
                      "hash": "v0-sha384-ca055fb36845db86e4278cf6e185f8674d11a96f4b29af27e401fc495cc82ef6b53a5729c3757713064649dc71c8c725",
                      "name": "4784_3_1_t1_dicom.zip",
                      "tags": [],
                      "created": "2016-09-21T14:56:11.224000+00:00",
                      "modified": "2016-09-21T14:56:11.224000+00:00",
                      "modality": null,
                      "info": {},
                      "type": "dicom",
                      "size": 2921881
                    }
                  ],
                  "created": "2016-09-21T14:56:11.452000+00:00",
                  "timestamp": "2016-09-21T19:24:45.539580+00:00",
                  "modified": "2016-09-21T14:56:11.452000+00:00",
                  "label": "4784_3_1_t1",
                  "session": "57e29f8afab726000f7ec6b1",
                  "collections": [
                    "57e2a026675ca0000f0eeb0c"
                  ],
                  "_id": "57e29f8bfab726000e7ec6b0",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "files": [
                    {
                      "origin": {
                        "method": "importer",
                        "type": "device",
                        "id": "importer_Admin_Import",
                        "name": "Admin Import"
                      },
                      "mimetype": "application/zip",
                      "measurements": [],
                      "hash": "v0-sha384-537e42b1dd8f1feef9844fbfb4f60461361e71cafa7055556097e9d0b9f7fac68c8f234ed126af9412bd43a548948847",
                      "name": "4784_5_1_fmri_dicom.zip",
                      "tags": [],
                      "created": "2016-09-21T14:56:13.580000+00:00",
                      "modified": "2016-09-21T14:56:13.580000+00:00",
                      "modality": null,
                      "info": {},
                      "type": "dicom",
                      "size": 4525137
                    }
                  ],
                  "created": "2016-09-21T14:56:13.886000+00:00",
                  "timestamp": "2016-09-21T19:24:45.539582+00:00",
                  "modified": "2016-09-21T14:56:13.886000+00:00",
                  "label": "4784_5_1_fmri",
                  "session": "57e29f8afab726000f7ec6b1",
                  "collections": [
                    "57e2a026675ca0000f0eeb0c"
                  ],
                  "_id": "57e29f8dfab726000e7ec6b3",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    "/users/{UserId}/collections": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "Get all collections that belong to the given user.",
        "operationId": "get_user_collections",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/collection-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "created": "2016-08-30T17:22:05.299000+00:00",
                  "curator": "user@test.com",
                  "label": "test",
                  "modified": "2016-08-30T17:22:05.299000+00:00",
                  "_id": "57c5c0bd9e512c606dd3df09",
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "user@test.com"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    "/users/{UserId}/projects": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "Get all projects that belong to the given user.",
        "operationId": "get_user_projects",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/project-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "group",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "group": "scitran",
                  "created": "2016-09-22T21:51:53.151000+00:00",
                  "modified": "2016-09-22T21:51:53.151000+00:00",
                  "label": "Neuroscience",
                  "_id": "57e452791cff88b85f9f9c97",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-22T21:52:27.576000+00:00",
                  "modified": "2016-09-22T21:52:27.576000+00:00",
                  "label": "Psychology",
                  "_id": "57e4529b1cff88b85f9f9c98",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-22T21:52:52.539000+00:00",
                  "modified": "2016-09-22T21:52:52.539000+00:00",
                  "label": "Testdata",
                  "_id": "57e452b41cff88b85f9f9c99",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "test-group",
                  "created": "2016-09-22T21:54:47.925000+00:00",
                  "modified": "2016-09-22T21:54:47.925000+00:00",
                  "label": "test-project",
                  "description": "Test Project",
                  "_id": "57e45327466d8e000e33a859",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-29T18:53:06.199000+00:00",
                  "modified": "2016-09-29T18:53:06.199000+00:00",
                  "label": "test2",
                  "description": "Test Project Two",
                  "_id": "57ed6312466d8e01c91ee427",
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    "/users/{UserId}/sessions": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "Get all sessions that belong to the given user.",
        "operationId": "get_user_sessions",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/session-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "project",
                  "created",
                  "modified",
                  "permissions",
                  "public",
                  "group",
                  "subject"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "group": "scitran",
                  "created": "2016-09-19T17:13:48.164000+00:00",
                  "subject": {
                    "code": "ex4784",
                    "_id": "57e01cccb1dc04000fb83f02"
                  },
                  "modified": "2016-09-19T17:13:48.164000+00:00",
                  "label": "control_1",
                  "project": "57e01cccf6b5d5edbcb4e1cf",
                  "_id": "57e01cccb1dc04000fb83f03",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-19T17:13:54.873000+00:00",
                  "subject": {
                    "code": "ex6879",
                    "_id": "57e01cd2b1dc04000eb83f05"
                  },
                  "modified": "2016-09-19T17:13:54.873000+00:00",
                  "label": "control_2",
                  "project": "57e01cccf6b5d5edbcb4e1cf",
                  "_id": "57e01cd2b1dc04000eb83f06",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-19T17:14:02.228000+00:00",
                  "subject": {
                    "code": "ex8403",
                    "_id": "57e01cdab1dc04000eb83f10"
                  },
                  "modified": "2016-09-19T17:14:02.228000+00:00",
                  "label": "patient_1",
                  "project": "57e01cccf6b5d5edbcb4e1cf",
                  "_id": "57e01cdab1dc04000eb83f11",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    "/jobs/add": {
      "post": {
        "summary": "Add a job",
        "operationId": "add_job",
        "tags": [
          "jobs"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "gear_id": "aex",
                "inputs": {
                  "dicom": {
                    "type": "acquisition",
                    "id": "573c9e6a844eac7fc01747cd",
                    "name": "1_1_dicom.zip"
                  }
                },
                "config": {
                  "two-digit multiple of ten": 20
                },
                "destination": {
                  "type": "acquisition",
                  "id": "573c9e6a844eac7fc01747cd"
                },
                "tags": [
                  "ad-hoc"
                ]
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/common-object-created"
            },
            "examples": {
              "response": {
                "_id": "573cb66b135d87002660597c"
              }
            }
          }
        }
      }
    },
    "/jobs/next": {
      "get": {
        "summary": "Get the next job in the queue",
        "description": "Used by the engine.",
        "operationId": "get_next_job",
        "tags": [
          "jobs"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/job-output"
            },
            "examples": {
              "response": {
                "inputs": {
                  "dicom": {
                    "type": "acquisition",
                    "id": "57ac7394c700190017123fb7",
                    "name": "8403_4_1_t1_dicom.zip"
                  }
                },
                "attempt": 1,
                "gear_id": "dcm_convert",
                "tags": [
                  "ad-hoc",
                  "dcm_convert"
                ],
                "destination": {
                  "type": "acquisition",
                  "id": "573c9e6a844eac7fc01747cd"
                },
                "modified": "2016-08-11T13:02:09.055000+00:00",
                "created": "2016-08-11T13:02:09.055000+00:00",
                "state": "pending",
                "id": "57ac77515e325c0018cd17cf",
                "config": {
                  "speed": 3
                }
              }
            }
          }
        }
      }
    },
    "/jobs/stats": {
      "get": {
        "summary": "Get stats about all current jobs",
        "operationId": "get_jobs_stats",
        "tags": [
          "jobs"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "by-state": {
                  "pending": 1,
                  "running": 3,
                  "failed": 0,
                  "complete": 17
                },
                "by-tag": [
                  {
                    "tags": [
                      "tag1"
                    ],
                    "count": 4
                  }
                ],
                "permafailed": 0
              }
            }
          }
        }
      }
    },
    "/jobs/reap": {
      "post": {
        "summary": "Reap stale jobs",
        "operationId": "reap_jobs",
        "tags": [
          "jobs"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "orphaned": 3
              }
            }
          }
        }
      }
    },
    "/jobs/{JobId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "JobId"
        }
      ],
      "get": {
        "summary": "Get job details",
        "operationId": "get_job",
        "tags": [
          "jobs"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/job-output"
            },
            "examples": {
              "response": {
                "inputs": {
                  "dicom": {
                    "type": "acquisition",
                    "id": "57ac7394c700190017123fb7",
                    "name": "8403_4_1_t1_dicom.zip"
                  }
                },
                "attempt": 1,
                "gear_id": "dcm_convert",
                "tags": [
                  "ad-hoc",
                  "dcm_convert"
                ],
                "destination": {
                  "type": "acquisition",
                  "id": "573c9e6a844eac7fc01747cd"
                },
                "modified": "2016-08-11T13:02:09.055000+00:00",
                "created": "2016-08-11T13:02:09.055000+00:00",
                "state": "pending",
                "id": "57ac77515e325c0018cd17cf",
                "config": {
                  "speed": 3
                }
              }
            }
          },
          "404": {
            "description": "JobId not found"
          }
        }
      },
      "put": {
        "summary": "Update a job.",
        "description": "Updates timestamp.\nEnforces a valid state machine transition, if any.\nRejects any change to a job that is not currently in 'pending' or 'running' state.\nAccepts the same body as /api/jobs/add , except all fields are optional.\n",
        "operationId": "update_job",
        "tags": [
          "jobs"
        ],
        "responses": {
          "200": {
            "description": "Job was updated.  No value is returned"
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "tags": [
                  "spectroscopy"
                ]
              }
            }
          }
        ]
      }
    },
    "/jobs/{JobId}/retry": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "JobId"
        }
      ],
      "post": {
        "summary": "Retry a job.",
        "description": "The job must have a state of 'failed', and must not have already been retried.\nThe failed jobs config is copied to a new job.\nThe ID of the new job is returned\n",
        "operationId": "retry_job",
        "tags": [
          "jobs"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "_id": "57a35c118120be0e8d1f3f5f"
              }
            }
          }
        }
      }
    },
    "/jobs/{JobId}/config.json": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "JobId"
        }
      ],
      "get": {
        "summary": "Get a job's config",
        "operationId": "get_job_config",
        "tags": [
          "jobs"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "speed": 5
              }
            }
          }
        }
      }
    },
    "/gears": {
      "get": {
        "summary": "List all gears",
        "operationId": "get_all_gears",
        "tags": [
          "gears"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/gears/{GearIdOrName}": {
      "post": {
        "summary": "Create or update a gear.",
        "description": "If no existing gear is found, one will be created\nOtherwise, the specified gear will be updated\n",
        "operationId": "add_gear",
        "parameters": [
          {
            "required": true,
            "description": "Name of the gear to interact with",
            "type": "string",
            "in": "path",
            "name": "GearIdOrName"
          }
        ],
        "tags": [
          "gears"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      },
      "get": {
        "summary": "Retrieve details about a specific gear",
        "operationId": "get_gear",
        "tags": [
          "gears"
        ],
        "parameters": [
          {
            "required": true,
            "description": "Id of the gear to interact with",
            "type": "string",
            "in": "path",
            "name": "GearIdOrName"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "name": "test-case-gear",
                "manifest": {
                  "name": "test-case-gear",
                  "label": "Test Case Gear",
                  "version": "0",
                  "author": "Nathaniel Kofalt",
                  "description": "A gear built to drive test cases",
                  "url": "http://none.example",
                  "source": "http://none.example",
                  "license": "MIT",
                  "config": {
                    "two-digit multiple of ten": {
                      "exclusiveMaximum": true,
                      "type": "number",
                      "multipleOf": 10,
                      "maximum": 100
                    }
                  },
                  "inputs": {
                    "any text file <= 100 KB": {
                      "base": "file",
                      "name": {
                        "pattern": "^.*.txt$"
                      },
                      "size": {
                        "maximum": 100000
                      }
                    }
                  }
                },
                "input": {}
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a gear (not recommended)",
        "operationId": "delete_gear",
        "tags": [
          "gears"
        ],
        "parameters": [
          {
            "required": true,
            "description": "Id of the gear to interact with",
            "type": "string",
            "in": "path",
            "name": "GearIdOrName"
          }
        ],
        "responses": {
          "200": {
            "description": "Gear was deleted"
          }
        }
      }
    },
    "/devices": {
      "get": {
        "summary": "List all devices.",
        "description": "Requires login.",
        "operationId": "get_all_devices",
        "tags": [
          "devices"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/device-output"
              }
            },
            "examples": {
              "response": [
                {
                  "errors": null,
                  "method": "bootstrapper",
                  "interval": 500,
                  "_id": "bootstrapper_Bootstrapper",
                  "name": "Bootstrapper",
                  "last_seen": "2016-11-28T18:54:11.880000+00:00"
                },
                {
                  "errors": null,
                  "name": "flywheel-utility",
                  "interval": 700,
                  "_id": "gear-register_flywheel-utility",
                  "method": "gear-register",
                  "last_seen": "2016-11-29T18:51:39.836000+00:00"
                },
                {
                  "errors": null,
                  "method": "importer",
                  "_id": "importer_admin_import",
                  "name": "admin import",
                  "last_seen": "2016-11-28T18:57:27.104000+00:00"
                },
                {
                  "errors": null,
                  "name": "Cron",
                  "_id": "cron_Cron",
                  "method": "cron",
                  "last_seen": "2016-11-28T23:17:01.261000+00:00"
                },
                {
                  "info": {
                    "basic": "info"
                  },
                  "errors": [
                    "An Error"
                  ],
                  "name": "example_drone",
                  "interval": 400,
                  "_id": "test_method_megans_drone",
                  "method": "test_method",
                  "last_seen": "2016-11-28T23:14:06.004000+00:00"
                }
              ]
            }
          }
        }
      },
      "post": {
        "summary": "Modify a device's interval, info or set errors.",
        "description": "Will modify the device record of device making the request.\nRequest must be drone request.\n",
        "operationId": "update_device",
        "tags": [
          "devices"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "example": {
                "modified": "1"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "info": {
                  "basic": "info"
                },
                "errors": [
                  "An Error"
                ],
                "interval": 400
              },
              "type": "object",
              "properties": {
                "interval": {
                  "type": "integer"
                },
                "errors": {
                  "$ref": "#/definitions/device-errors"
                },
                "info": {
                  "$ref": "#/definitions/common-info"
                }
              },
              "additionalProperties": false
            }
          }
        ]
      }
    },
    "/devices/self": {
      "get": {
        "summary": "Get device document for device making the request.",
        "description": "Request must be a drone request.",
        "operationId": "get_current_device",
        "tags": [
          "devices"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/device-output"
            },
            "examples": {
              "response": {
                "info": {
                  "basic": "info"
                },
                "errors": [
                  "An Error"
                ],
                "name": "example_drone",
                "interval": 400,
                "_id": "test_method_megans_drone",
                "method": "test_method",
                "last_seen": "2016-11-28T23:14:06.004000+00:00"
              }
            }
          }
        }
      }
    },
    "/devices/status": {
      "get": {
        "summary": "Get status for all known devices.",
        "description": "ok - missing - error - unknown",
        "operationId": "get_all_devices_status",
        "tags": [
          "devices"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/device-status"
            },
            "examples": {
              "response": {
                "bootstrapper_Bootstrapper": {
                  "status": "ok",
                  "last_seen": "2016-11-28T18:54:11.880000+00:00"
                },
                "test_method_example_drone": {
                  "status": "error",
                  "errors": [
                    "An Error"
                  ],
                  "last_seen": "2016-11-28T23:14:06.004000+00:00"
                },
                "gear-register_flywheel-utility": {
                  "status": "ok",
                  "last_seen": "2016-11-29T18:51:39.836000+00:00"
                },
                "cron_Cron": {
                  "status": "ok",
                  "last_seen": "2016-11-28T23:17:01.261000+00:00"
                },
                "importer_admin_import": {
                  "status": "unknown",
                  "last_seen": "2016-11-28T18:57:27.104000+00:00"
                }
              }
            }
          }
        }
      }
    },
    "/devices/{DeviceId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "DeviceId"
        }
      ],
      "get": {
        "summary": "Get device details",
        "operationId": "get_device",
        "tags": [
          "devices"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/device-output"
            },
            "examples": {
              "response": {
                "info": {
                  "basic": "info"
                },
                "errors": [
                  "An Error"
                ],
                "name": "example_drone",
                "interval": 400,
                "_id": "test_method_megans_drone",
                "method": "test_method",
                "last_seen": "2016-11-28T23:14:06.004000+00:00"
              }
            }
          },
          "404": {
            "description": "DeviceId not found"
          }
        }
      }
    },
    "/groups": {
      "get": {
        "summary": "List all groups",
        "operationId": "get_all_groups",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/group-output-list"
            },
            "examples": {
              "response": [
                {
                  "label": "Test Group",
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "group_admin@fakeuser.com"
                    },
                    {
                      "access": "rw",
                      "_id": "group_member_read-write@fakeuser.com"
                    },
                    {
                      "access": "ro",
                      "_id": "group_member_read-only@fakeuser.com"
                    }
                  ],
                  "created": "2016-08-19T11:41:15.360000+00:00",
                  "modified": "2016-08-19T11:41:15.360000+00:00",
                  "_id": "test_group"
                }
              ]
            }
          }
        }
      },
      "post": {
        "summary": "Add a group",
        "operationId": "add_group",
        "tags": [
          "groups"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/group-input"
                }
              ],
              "required": [
                "_id"
              ],
              "example": {
                "label": "Example Group",
                "_id": "example_group"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/group-new-output"
            }
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/groups/{GroupId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "GroupId"
        }
      ],
      "get": {
        "summary": "Get group info",
        "operationId": "get_group",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/group-output"
                }
              ],
              "required": [
                "permissions",
                "created",
                "modified",
                "_id"
              ]
            },
            "examples": {
              "response": {
                "label": "Test Group",
                "permissions": [
                  {
                    "access": "admin",
                    "_id": "group_admin@fakeuser.com"
                  },
                  {
                    "access": "rw",
                    "_id": "group_member_read-write@fakeuser.com"
                  },
                  {
                    "access": "ro",
                    "_id": "group_member_read-only@fakeuser.com"
                  }
                ],
                "created": "2016-08-19T11:41:15.360000+00:00",
                "modified": "2016-08-19T11:41:15.360000+00:00",
                "_id": "test_group"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update group",
        "operationId": "modify_group",
        "tags": [
          "groups"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "example": {
                "label": "New group label"
              },
              "type": "object",
              "properties": {
                "_id": {
                  "type": "string",
                  "maxLength": 64,
                  "minLength": 2,
                  "pattern": "^[0-9a-z][0-9a-z.@_-]{0,30}[0-9a-z]$"
                },
                "label": {
                  "maxLength": 64,
                  "minLength": 1,
                  "pattern": "^[0-9A-Za-z][0-9A-Za-z .@_-]{0,30}[0-9A-Za-z]$",
                  "title": "label",
                  "type": "string"
                }
              },
              "additionalProperties": false
            }
          }
        ],
        "responses": {
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a group",
        "operationId": "delete_group",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/groups/{GroupId}/projects": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "GroupId"
        }
      ],
      "get": {
        "summary": "Get all projects in a group",
        "operationId": "get_group_projects",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/project-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "group",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "group": "scitran",
                  "created": "2016-09-22T21:51:53.151000+00:00",
                  "modified": "2016-09-22T21:51:53.151000+00:00",
                  "label": "Neuroscience",
                  "_id": "57e452791cff88b85f9f9c97",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-22T21:52:27.576000+00:00",
                  "modified": "2016-09-22T21:52:27.576000+00:00",
                  "label": "Psychology",
                  "_id": "57e4529b1cff88b85f9f9c98",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-22T21:52:52.539000+00:00",
                  "modified": "2016-09-22T21:52:52.539000+00:00",
                  "label": "Testdata",
                  "_id": "57e452b41cff88b85f9f9c99",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "test-group",
                  "created": "2016-09-22T21:54:47.925000+00:00",
                  "modified": "2016-09-22T21:54:47.925000+00:00",
                  "label": "test-project",
                  "description": "Test Project",
                  "_id": "57e45327466d8e000e33a859",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-29T18:53:06.199000+00:00",
                  "modified": "2016-09-29T18:53:06.199000+00:00",
                  "label": "test2",
                  "description": "Test Project Two",
                  "_id": "57ed6312466d8e01c91ee427",
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    "/groups/{GroupId}/permissions": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "GroupId"
        }
      ],
      "post": {
        "summary": "Add a permission",
        "operationId": "add_group_permission",
        "tags": [
          "groups"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/permission"
                }
              ],
              "required": [
                "_id",
                "access"
              ],
              "example": {
                "_id": "coltonlw@flywheel.io",
                "access": "admin"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/groups/{GroupId}/permissions/{UserId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "GroupId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "List a user's permissions for this group.",
        "operationId": "get_group_user_permission",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/permission-output-default-required"
            },
            "examples": {
              "response": {
                "access": "admin",
                "_id": "coltonlw@flywheel.io"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a user's permission for this group.",
        "operationId": "modify_group_user_permission",
        "tags": [
          "groups"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/permission"
                }
              ],
              "required": [
                "_id",
                "access"
              ],
              "example": {
                "_id": "coltonlw@flywheel.io",
                "access": "admin"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a permission",
        "operationId": "delete_group_user_permission",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/groups/{GroupId}/tags": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "GroupId"
        }
      ],
      "post": {
        "summary": "Add a tag to group.",
        "description": "Progates changes to projects, sessions and acquisitions",
        "operationId": "add_group_tag",
        "tags": [
          "groups"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/groups/{GroupId}/tags/{TagValue}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "GroupId"
        },
        {
          "required": true,
          "description": "The tag to interact with",
          "type": "string",
          "in": "path",
          "name": "TagValue"
        }
      ],
      "get": {
        "summary": "Get the value of a tag, by name.",
        "operationId": "get_group_tag",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "description": "Returns a single tag by name",
            "schema": {
              "$ref": "#/definitions/tag"
            },
            "examples": {
              "response": {
                "value": "example-tag"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Rename a tag.",
        "operationId": "rename_group_tag",
        "tags": [
          "groups"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a tag",
        "operationId": "delete_group_tag",
        "tags": [
          "groups"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/collections": {
      "get": {
        "summary": "List all collections.",
        "operationId": "get_all_collections",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/collection-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "created": "2016-08-30T17:22:05.299000+00:00",
                  "curator": "user@test.com",
                  "label": "test",
                  "modified": "2016-08-30T17:22:05.299000+00:00",
                  "_id": "57c5c0bd9e512c606dd3df09",
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "user@test.com"
                    }
                  ]
                }
              ]
            }
          }
        }
      },
      "post": {
        "summary": "Create a collection",
        "operationId": "create_collection",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Collection",
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/collection-input"
                }
              ],
              "required": [
                "label"
              ],
              "example": {
                "label": "control-group",
                "description": "Control group collection"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/collection-new-output"
            },
            "examples": {
              "response": {
                "_id": "57bb486a9e512c41c8b7fdd5"
              }
            }
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/collections/curators": {
      "get": {
        "summary": "List all curators of collections",
        "operationId": "get_all_collections_curators",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "properties": {
                  "firstname": {
                    "maxLength": 64,
                    "minLength": 1,
                    "title": "First Name",
                    "type": "string"
                  },
                  "lastname": {
                    "maxLength": 64,
                    "minLength": 1,
                    "title": "Last Name",
                    "type": "string"
                  },
                  "_id": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            },
            "examples": {
              "response": [
                {
                  "lastname": "LW",
                  "_id": "coltonlw@flywheel.io",
                  "firstname": "Colton"
                }
              ]
            }
          }
        }
      }
    },
    "/collections/{CollectionId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "get": {
        "summary": "Retrieve a single collection",
        "operationId": "get_collection",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "allOf": [
                {
                  "$ref": "#/definitions/collection-output"
                }
              ],
              "required": [
                "_id",
                "label",
                "created",
                "modified",
                "permissions"
              ]
            },
            "examples": {
              "response": {
                "created": "2016-08-30T17:22:05.299000+00:00",
                "curator": "user@test.com",
                "label": "test",
                "description": "Test collection",
                "modified": "2016-08-30T17:22:05.299000+00:00",
                "_id": "57c5c0bd9e512c606dd3df09",
                "permissions": [
                  {
                    "access": "admin",
                    "_id": "user@test.com"
                  }
                ]
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a collection and its contents",
        "operationId": "modify_collection",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "example": {
                "contents": {
                  "operation": "add",
                  "nodes": [
                    {
                      "level": "session",
                      "_id": "57dc50b0931cefd8ac2a371e"
                    }
                  ]
                }
              },
              "type": "object",
              "properties": {
                "public": {
                  "type": "boolean"
                },
                "label": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 256
                },
                "info": {
                  "$ref": "#/definitions/container-info"
                },
                "description": {
                  "type": "string"
                },
                "contents": {
                  "type": "object"
                }
              },
              "additionalProperties": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Collection updated"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a collection",
        "operationId": "delete_collection",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "Collection was deleted"
          }
        }
      }
    },
    "/collections/{CollectionId}/sessions": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "get": {
        "summary": "List sessions in a collection",
        "operationId": "get_collection_sessions",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/session-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "project",
                  "created",
                  "modified",
                  "permissions",
                  "public",
                  "group",
                  "subject"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "group": "scitran",
                  "created": "2016-09-19T17:13:48.164000+00:00",
                  "subject": {
                    "code": "ex4784",
                    "_id": "57e01cccb1dc04000fb83f02"
                  },
                  "modified": "2016-09-19T17:13:48.164000+00:00",
                  "label": "control_1",
                  "project": "57e01cccf6b5d5edbcb4e1cf",
                  "_id": "57e01cccb1dc04000fb83f03",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-19T17:13:54.873000+00:00",
                  "subject": {
                    "code": "ex6879",
                    "_id": "57e01cd2b1dc04000eb83f05"
                  },
                  "modified": "2016-09-19T17:13:54.873000+00:00",
                  "label": "control_2",
                  "project": "57e01cccf6b5d5edbcb4e1cf",
                  "_id": "57e01cd2b1dc04000eb83f06",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "group": "scitran",
                  "created": "2016-09-19T17:14:02.228000+00:00",
                  "subject": {
                    "code": "ex8403",
                    "_id": "57e01cdab1dc04000eb83f10"
                  },
                  "modified": "2016-09-19T17:14:02.228000+00:00",
                  "label": "patient_1",
                  "project": "57e01cccf6b5d5edbcb4e1cf",
                  "_id": "57e01cdab1dc04000eb83f11",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    "/collections/{CollectionId}/acquisitions": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "get": {
        "summary": "List acquisitions in a collection",
        "operationId": "get_collection_acquisitions",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/acquisition-output"
                  }
                ],
                "required": [
                  "_id",
                  "public",
                  "label",
                  "session",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            },
            "examples": {
              "response": [
                {
                  "files": [
                    {
                      "origin": {
                        "method": "importer",
                        "type": "device",
                        "id": "importer_Admin_Import",
                        "name": "Admin Import"
                      },
                      "mimetype": "application/zip",
                      "measurements": [],
                      "hash": "v0-sha384-dd3c97bfe0ad1fcba75ae6718c6e81038c59af4f447f5db194d52732efa4f955b28455db02eb64cad3e4e55f11e3679f",
                      "name": "4784_1_1_localizer_dicom.zip",
                      "tags": [],
                      "created": "2016-09-21T14:56:09.943000+00:00",
                      "modified": "2016-09-21T14:56:09.943000+00:00",
                      "modality": null,
                      "info": {},
                      "type": "dicom",
                      "size": 989933
                    }
                  ],
                  "created": "2016-09-21T14:56:10.026000+00:00",
                  "timestamp": "2016-09-21T19:24:45.539570+00:00",
                  "modified": "2016-09-21T14:56:10.026000+00:00",
                  "label": "4784_1_1_localizer",
                  "session": "57e29f8afab726000f7ec6b1",
                  "collections": [
                    "57e2a026675ca0000f0eeb0c"
                  ],
                  "_id": "57e29f8afab726000f7ec6b2",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "files": [
                    {
                      "origin": {
                        "method": "importer",
                        "type": "device",
                        "id": "importer_Admin_Import",
                        "name": "Admin Import"
                      },
                      "mimetype": "application/zip",
                      "measurements": [],
                      "hash": "v0-sha384-ca055fb36845db86e4278cf6e185f8674d11a96f4b29af27e401fc495cc82ef6b53a5729c3757713064649dc71c8c725",
                      "name": "4784_3_1_t1_dicom.zip",
                      "tags": [],
                      "created": "2016-09-21T14:56:11.224000+00:00",
                      "modified": "2016-09-21T14:56:11.224000+00:00",
                      "modality": null,
                      "info": {},
                      "type": "dicom",
                      "size": 2921881
                    }
                  ],
                  "created": "2016-09-21T14:56:11.452000+00:00",
                  "timestamp": "2016-09-21T19:24:45.539580+00:00",
                  "modified": "2016-09-21T14:56:11.452000+00:00",
                  "label": "4784_3_1_t1",
                  "session": "57e29f8afab726000f7ec6b1",
                  "collections": [
                    "57e2a026675ca0000f0eeb0c"
                  ],
                  "_id": "57e29f8bfab726000e7ec6b0",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                },
                {
                  "files": [
                    {
                      "origin": {
                        "method": "importer",
                        "type": "device",
                        "id": "importer_Admin_Import",
                        "name": "Admin Import"
                      },
                      "mimetype": "application/zip",
                      "measurements": [],
                      "hash": "v0-sha384-537e42b1dd8f1feef9844fbfb4f60461361e71cafa7055556097e9d0b9f7fac68c8f234ed126af9412bd43a548948847",
                      "name": "4784_5_1_fmri_dicom.zip",
                      "tags": [],
                      "created": "2016-09-21T14:56:13.580000+00:00",
                      "modified": "2016-09-21T14:56:13.580000+00:00",
                      "modality": null,
                      "info": {},
                      "type": "dicom",
                      "size": 4525137
                    }
                  ],
                  "created": "2016-09-21T14:56:13.886000+00:00",
                  "timestamp": "2016-09-21T19:24:45.539582+00:00",
                  "modified": "2016-09-21T14:56:13.886000+00:00",
                  "label": "4784_5_1_fmri",
                  "session": "57e29f8afab726000f7ec6b1",
                  "collections": [
                    "57e2a026675ca0000f0eeb0c"
                  ],
                  "_id": "57e29f8dfab726000e7ec6b3",
                  "public": false,
                  "permissions": [
                    {
                      "access": "admin",
                      "_id": "coltonlw@flywheel.io"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    "/collections/{CollectionId}/tags": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "post": {
        "summary": "Add a tag to collection.",
        "description": "Progates changes to projects, sessions and acquisitions",
        "operationId": "add_collection_tag",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/collections/{CollectionId}/tags/{TagValue}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "description": "The tag to interact with",
          "type": "string",
          "in": "path",
          "name": "TagValue"
        }
      ],
      "get": {
        "summary": "Get the value of a tag, by name.",
        "operationId": "get_collection_tag",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "Returns a single tag by name",
            "schema": {
              "$ref": "#/definitions/tag"
            },
            "examples": {
              "response": {
                "value": "example-tag"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Rename a tag.",
        "operationId": "rename_collection_tag",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a tag",
        "operationId": "delete_collection_tag",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/collections/{CollectionId}/packfile-start": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "post": {
        "summary": "Start a packfile upload to collection",
        "operationId": "start_collection_packfile_upload",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/packfile-start"
            },
            "examples": {
              "response": {
                "token": "57fe88cc9e512c5d2b5dcb0b"
              }
            }
          }
        }
      }
    },
    "/collections/{CollectionId}/packfile": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "post": {
        "summary": "Add files to an in-progress packfile",
        "operationId": "collection_packfile_upload",
        "tags": [
          "collections"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/file-output"
              }
            },
            "examples": {
              "response": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          }
        }
      }
    },
    "/collections/{CollectionId}/packfile-end": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "post": {
        "summary": "End a packfile upload",
        "operationId": "end_collection_packfile_upload",
        "tags": [
          "collections"
        ],
        "produces": [
          "text/event-stream"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/collections/{CollectionId}/files": {
      "parameters": [
        {
          "name": "CollectionId",
          "in": "path",
          "type": "string",
          "required": true
        }
      ],
      "post": {
        "summary": "Upload a file to collection.",
        "operationId": "upload_collection_file",
        "tags": [
          "collections"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "file",
            "in": "formData",
            "type": "file",
            "required": true,
            "description": "The file to upload"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/collections/{CollectionId}/files/{FileName}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "FileName"
        }
      ],
      "get": {
        "summary": "Download a file.",
        "description": "If \"ticket\" is specified by empty, a download ticket will be created\nIf \"ticket\" is not specified, the file will be download\nIf \"ticket\" is specified and not empty, the file will be downloaded\n",
        "operationId": "download_collection_file",
        "tags": [
          "collections"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "name": "ticket",
            "in": "query",
            "type": "string",
            "description": "ticket id of the file to download"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/download-ticket"
            },
            "examples": {
              "response": {
                "ticket": "1e975e3d-21e9-41f4-bb97-261f03d35ba1"
              }
            }
          }
        }
      },
      "post": {
        "summary": "Replace a file",
        "operationId": "replace_collection_file",
        "tags": [
          "collections"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/collections/{CollectionId}/permissions": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "post": {
        "summary": "Add a permission",
        "operationId": "add_collection_permission",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/permission"
                }
              ],
              "required": [
                "_id",
                "access"
              ],
              "example": {
                "_id": "coltonlw@flywheel.io",
                "access": "admin"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/collections/{CollectionId}/permissions/{UserId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "List a user's permissions for this collection.",
        "operationId": "get_collection_user_permission",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/permission-output-default-required"
            },
            "examples": {
              "response": {
                "access": "admin",
                "_id": "coltonlw@flywheel.io"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a user's permission for this collection.",
        "operationId": "modify_collection_user_permission",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/permission"
                }
              ],
              "required": [
                "_id",
                "access"
              ],
              "example": {
                "_id": "coltonlw@flywheel.io",
                "access": "admin"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a permission",
        "operationId": "delete_collection_user_permission",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/collections/{CollectionId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "post": {
        "summary": "Add a note to collection.",
        "operationId": "add_collection_note",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/collections/{CollectionId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "get": {
        "summary": "Get a note on collection.",
        "operationId": "get_collection_note",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/note-output"
            },
            "examples": {
              "response": {
                "_id": "580925ce9e512c57dc8a103b",
                "text": "some text",
                "created": "2016-10-21T17:19:40.899000+00:00",
                "modified": "2016-10-21T17:19:40.899000+00:00",
                "user": "coltonlw@flywheel.io"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a note on collection.",
        "operationId": "modify_collection_note",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Remove a note from collection",
        "operationId": "delete_collection_note",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/collections/{CollectionId}/analyses": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        }
      ],
      "post": {
        "summary": "Create an analysis and upload files.",
        "operationId": "add_collection_analysis",
        "tags": [
          "collections"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/collections/{CollectionId}/analyses/{AnalysisId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Get an analysis.",
        "operationId": "get_collection_analysis",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/analysis-output"
            },
            "examples": {
              "response": {
                "files": [
                  {
                    "origin": {
                      "type": "job",
                      "id": "58063f24e5dc5b001657a87f"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T15:26:35.701000+00:00",
                    "modality": null,
                    "input": true,
                    "size": 21804112,
                    "type": "None",
                    "info": {}
                  },
                  {
                    "origin": {
                      "type": "job",
                      "id": "58065fa7e5dc5b001457a882"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T17:45:17.776000+00:00",
                    "modality": null,
                    "output": true,
                    "info": {},
                    "type": "None",
                    "size": 21804112
                  }
                ],
                "created": "2016-10-18T17:45:11.778000+00:00",
                "modified": "2016-10-18T17:45:11.778000+00:00",
                "label": "cortex-demo 10/18/2016 13:45:5",
                "job": {
                  "inputs": {
                    "anatomy": {
                      "type": "analysis",
                      "id": "58063f24e5dc5b001657a87e",
                      "name": "cortical_surface_right_hemisphere.obj"
                    }
                  },
                  "attempt": 1,
                  "name": "cortex-demo",
                  "tags": [
                    "ad-hoc",
                    "cortex-demo",
                    "analysis"
                  ],
                  "destination": {
                    "type": "analysis",
                    "id": "58065fa7e5dc5b001457a881"
                  },
                  "request": {
                    "inputs": [
                      {
                        "location": "/",
                        "type": "http",
                        "uri": "https://storage.googleapis.com/flywheel/gears/v1/scitran/cortex-demo/cortex-demo_manifest-labels_20160725T031837.331720Z.tar.gz",
                        "vu": "vu0:sha384:ssx5VWyFg7r8IBoOIphq7GaB_CymInQ1NxTV2WTDzglJLJ1-ktEbjLIHVABRzesV"
                      },
                      {
                        "type": "scitran",
                        "uri": "/jobs/58065fa7e5dc5b001457a882/config.json",
                        "location": "/flywheel/v0"
                      },
                      {
                        "type": "scitran",
                        "uri": "/sessions/58063e7ed213ed776045b320/analyses/58063f24e5dc5b001657a87e/files/cortical_surface_right_hemisphere.obj",
                        "location": "/flywheel/v0/input/anatomy"
                      }
                    ],
                    "target": {
                      "command": [
                        "bash",
                        "-c",
                        "rm -rf output; mkdir -p output; ./run; echo \"Exit was $?\""
                      ],
                      "env": {
                        "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
                      },
                      "dir": "/flywheel/v0"
                    },
                    "outputs": [
                      {
                        "type": "scitran",
                        "uri": "/engine?level=analysis&id=58065fa7e5dc5b001457a881&job=58065fa7e5dc5b001457a882",
                        "location": "/flywheel/v0/output"
                      }
                    ]
                  },
                  "modified": "2016-10-18T17:45:21.344000+00:00",
                  "created": "2016-10-18T17:45:11.816000+00:00",
                  "state": "complete",
                  "config": {},
                  "id": "58065fa7e5dc5b001457a882"
                },
                "user": "canakgun@flywheel.io",
                "_id": "58065fa7e5dc5b001457a881"
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete an anaylsis",
        "operationId": "delete_collection_analysis",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/collections/{CollectionId}/analyses/{AnalysisId}/files": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Download analysis files.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for all files in the anlaysis\nIf no \"ticket\" query param is included, server error 500\n",
        "operationId": "download_collection_analysis_files",
        "tags": [
          "collections"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/collections/{CollectionId}/analyses/{AnalysisId}/files/{Filename}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "description": "regex to select files for download",
          "name": "Filename"
        }
      ],
      "get": {
        "summary": "Download anaylsis files with filter.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for matching files in the anlaysis.\nIf no \"ticket\" query param is included, files will be downloaded directly.\n",
        "operationId": "download_collection_analysis_files_by_filename",
        "tags": [
          "collections"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/collections/{CollectionId}/analyses/{AnalysisId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "post": {
        "summary": "Add a note to collection analysis.",
        "operationId": "add_collection_analysis_note",
        "tags": [
          "collections"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/collections/{CollectionId}/analyses/{AnalysisId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "CollectionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "delete": {
        "summary": "Remove a note from collection analysis.",
        "operationId": "delete_collection_analysis_note",
        "tags": [
          "collections"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/sessions": {
      "get": {
        "summary": "Get a list of sessions",
        "operationId": "get_all_sessions",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/session-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "project",
                  "created",
                  "modified",
                  "permissions",
                  "public",
                  "group",
                  "subject"
                ]
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new session",
        "operationId": "create_session",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Session",
              "allOf": [
                {
                  "$ref": "#/definitions/session-input"
                }
              ],
              "required": [
                "label",
                "project"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/container-new-output"
            }
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/sessions/{SessionId}": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "SessionId",
          "required": true
        }
      ],
      "get": {
        "summary": "Get a single session",
        "operationId": "get_session",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/session-output"
                }
              ],
              "required": [
                "_id",
                "label",
                "project",
                "created",
                "modified",
                "permissions",
                "public",
                "group",
                "subject"
              ]
            }
          }
        }
      },
      "put": {
        "summary": "Update a session",
        "operationId": "modify_session",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Session",
              "allOf": [
                {
                  "$ref": "#/definitions/session-input"
                }
              ],
              "required": [
                "label",
                "project"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a session",
        "operationId": "delete_session",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/sessions/{SessionId}/jobs": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "SessionId",
          "required": true
        }
      ],
      "get": {
        "summary": "Return any jobs that use inputs from this session",
        "operationId": "get_session_jobs",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "in": "query",
            "type": "string",
            "name": "states",
            "description": "filter results by job state"
          },
          {
            "in": "query",
            "type": "string",
            "name": "tags",
            "description": "filter results by job tags"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/session-jobs-output"
            }
          }
        }
      }
    },
    "/sessions/{SessionId}/tags": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        }
      ],
      "post": {
        "summary": "Add a tag to session.",
        "description": "Progates changes to projects, sessions and acquisitions",
        "operationId": "add_session_tag",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/sessions/{SessionId}/tags/{TagValue}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "description": "The tag to interact with",
          "type": "string",
          "in": "path",
          "name": "TagValue"
        }
      ],
      "get": {
        "summary": "Get the value of a tag, by name.",
        "operationId": "get_session_tag",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "description": "Returns a single tag by name",
            "schema": {
              "$ref": "#/definitions/tag"
            },
            "examples": {
              "response": {
                "value": "example-tag"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Rename a tag.",
        "operationId": "rename_session_tag",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a tag",
        "operationId": "delete_session_tag",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/sessions/{SessionId}/packfile-start": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        }
      ],
      "post": {
        "summary": "Start a packfile upload to session",
        "operationId": "start_session_packfile_upload",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/packfile-start"
            },
            "examples": {
              "response": {
                "token": "57fe88cc9e512c5d2b5dcb0b"
              }
            }
          }
        }
      }
    },
    "/sessions/{SessionId}/packfile": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        }
      ],
      "post": {
        "summary": "Add files to an in-progress packfile",
        "operationId": "session_packfile_upload",
        "tags": [
          "sessions"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/file-output"
              }
            },
            "examples": {
              "response": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          }
        }
      }
    },
    "/sessions/{SessionId}/packfile-end": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        }
      ],
      "post": {
        "summary": "End a packfile upload",
        "operationId": "end_session_packfile_upload",
        "tags": [
          "sessions"
        ],
        "produces": [
          "text/event-stream"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/sessions/{SessionId}/files": {
      "parameters": [
        {
          "name": "SessionId",
          "in": "path",
          "type": "string",
          "required": true
        }
      ],
      "post": {
        "summary": "Upload a file to session.",
        "operationId": "upload_session_file",
        "tags": [
          "sessions"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "file",
            "in": "formData",
            "type": "file",
            "required": true,
            "description": "The file to upload"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/sessions/{SessionId}/files/{FileName}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "FileName"
        }
      ],
      "get": {
        "summary": "Download a file.",
        "description": "If \"ticket\" is specified by empty, a download ticket will be created\nIf \"ticket\" is not specified, the file will be download\nIf \"ticket\" is specified and not empty, the file will be downloaded\n",
        "operationId": "download_session_file",
        "tags": [
          "sessions"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "name": "ticket",
            "in": "query",
            "type": "string",
            "description": "ticket id of the file to download"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/download-ticket"
            },
            "examples": {
              "response": {
                "ticket": "1e975e3d-21e9-41f4-bb97-261f03d35ba1"
              }
            }
          }
        }
      },
      "post": {
        "summary": "Replace a file",
        "operationId": "replace_session_file",
        "tags": [
          "sessions"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/sessions/{SessionId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        }
      ],
      "post": {
        "summary": "Add a note to session.",
        "operationId": "add_session_note",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/sessions/{SessionId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "get": {
        "summary": "Get a note on session.",
        "operationId": "get_session_note",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/note-output"
            },
            "examples": {
              "response": {
                "_id": "580925ce9e512c57dc8a103b",
                "text": "some text",
                "created": "2016-10-21T17:19:40.899000+00:00",
                "modified": "2016-10-21T17:19:40.899000+00:00",
                "user": "coltonlw@flywheel.io"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a note on session.",
        "operationId": "modify_session_note",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Remove a note from session",
        "operationId": "delete_session_note",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/sessions/{SessionId}/acquisitions": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "SessionId",
          "required": true
        }
      ],
      "get": {
        "summary": "List acquisitions in a session",
        "operationId": "get_session_acquisitions",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/acquisition-output"
                  }
                ],
                "required": [
                  "_id",
                  "public",
                  "label",
                  "session",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            }
          }
        }
      }
    },
    "/sessions/{SessionId}/analyses": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "required": true,
          "name": "SessionId"
        }
      ],
      "post": {
        "summary": "Create an analysis and upload files.",
        "description": "When query param \"job\" is \"true\", send JSON to create\nan analysis and job.  Otherwise, multipart/form-data\nto upload files and create an analysis.\n",
        "operationId": "add_session_analysis",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "example": {
                "analysis": {
                  "label": "Test Analysis 1"
                },
                "job": {
                  "gear_id": "dcm_convert",
                  "inputs": {
                    "dicom": {
                      "type": "acquisition",
                      "id": "57081d06b386a6dc79ca386b",
                      "name": "test_acquisition_dicom.zip"
                    }
                  },
                  "tags": [
                    "example"
                  ]
                }
              },
              "type": "object",
              "properties": {
                "analysis": {
                  "type": "object",
                  "allOf": [
                    {
                      "$ref": "#/definitions/analysis-input"
                    }
                  ],
                  "required": [
                    "label"
                  ]
                },
                "job": {
                  "type": "object",
                  "$ref": "#/definitions/job-input"
                }
              }
            }
          },
          {
            "in": "query",
            "type": "boolean",
            "name": "job"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/sessions/{SessionId}/analyses/{AnalysisId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Get an analysis.",
        "operationId": "get_session_analysis",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/analysis-output"
            },
            "examples": {
              "response": {
                "files": [
                  {
                    "origin": {
                      "type": "job",
                      "id": "58063f24e5dc5b001657a87f"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T15:26:35.701000+00:00",
                    "modality": null,
                    "input": true,
                    "size": 21804112,
                    "type": "None",
                    "info": {}
                  },
                  {
                    "origin": {
                      "type": "job",
                      "id": "58065fa7e5dc5b001457a882"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T17:45:17.776000+00:00",
                    "modality": null,
                    "output": true,
                    "info": {},
                    "type": "None",
                    "size": 21804112
                  }
                ],
                "created": "2016-10-18T17:45:11.778000+00:00",
                "modified": "2016-10-18T17:45:11.778000+00:00",
                "label": "cortex-demo 10/18/2016 13:45:5",
                "job": {
                  "inputs": {
                    "anatomy": {
                      "type": "analysis",
                      "id": "58063f24e5dc5b001657a87e",
                      "name": "cortical_surface_right_hemisphere.obj"
                    }
                  },
                  "attempt": 1,
                  "name": "cortex-demo",
                  "tags": [
                    "ad-hoc",
                    "cortex-demo",
                    "analysis"
                  ],
                  "destination": {
                    "type": "analysis",
                    "id": "58065fa7e5dc5b001457a881"
                  },
                  "request": {
                    "inputs": [
                      {
                        "location": "/",
                        "type": "http",
                        "uri": "https://storage.googleapis.com/flywheel/gears/v1/scitran/cortex-demo/cortex-demo_manifest-labels_20160725T031837.331720Z.tar.gz",
                        "vu": "vu0:sha384:ssx5VWyFg7r8IBoOIphq7GaB_CymInQ1NxTV2WTDzglJLJ1-ktEbjLIHVABRzesV"
                      },
                      {
                        "type": "scitran",
                        "uri": "/jobs/58065fa7e5dc5b001457a882/config.json",
                        "location": "/flywheel/v0"
                      },
                      {
                        "type": "scitran",
                        "uri": "/sessions/58063e7ed213ed776045b320/analyses/58063f24e5dc5b001657a87e/files/cortical_surface_right_hemisphere.obj",
                        "location": "/flywheel/v0/input/anatomy"
                      }
                    ],
                    "target": {
                      "command": [
                        "bash",
                        "-c",
                        "rm -rf output; mkdir -p output; ./run; echo \"Exit was $?\""
                      ],
                      "env": {
                        "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
                      },
                      "dir": "/flywheel/v0"
                    },
                    "outputs": [
                      {
                        "type": "scitran",
                        "uri": "/engine?level=analysis&id=58065fa7e5dc5b001457a881&job=58065fa7e5dc5b001457a882",
                        "location": "/flywheel/v0/output"
                      }
                    ]
                  },
                  "modified": "2016-10-18T17:45:21.344000+00:00",
                  "created": "2016-10-18T17:45:11.816000+00:00",
                  "state": "complete",
                  "config": {},
                  "id": "58065fa7e5dc5b001457a882"
                },
                "user": "canakgun@flywheel.io",
                "_id": "58065fa7e5dc5b001457a881"
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete an anaylsis",
        "operationId": "delete_session_analysis",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/sessions/{SessionId}/analyses/{AnalysisId}/files": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Download analysis files.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for all files in the anlaysis\nIf no \"ticket\" query param is included, server error 500\n",
        "operationId": "download_session_analysis_files",
        "tags": [
          "sessions"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/sessions/{SessionId}/analyses/{AnalysisId}/files/{Filename}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "description": "regex to select files for download",
          "name": "Filename"
        }
      ],
      "get": {
        "summary": "Download anaylsis files with filter.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for matching files in the anlaysis.\nIf no \"ticket\" query param is included, files will be downloaded directly.\n",
        "operationId": "download_session_analysis_files_by_filename",
        "tags": [
          "sessions"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/sessions/{SessionId}/analyses/{AnalysisId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "post": {
        "summary": "Add a note to session analysis.",
        "operationId": "add_session_analysis_note",
        "tags": [
          "sessions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/sessions/{SessionId}/analyses/{AnalysisId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "SessionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "delete": {
        "summary": "Remove a note from session analysis.",
        "operationId": "delete_session_analysis_note",
        "tags": [
          "sessions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/acquisitions": {
      "get": {
        "summary": "Get a list of acquisitions",
        "operationId": "get_all_acquisitions",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/acquisition-output"
                  }
                ],
                "required": [
                  "_id",
                  "public",
                  "label",
                  "session",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new acquisition",
        "operationId": "create_acquisition",
        "tags": [
          "acquisitions"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Acquisition",
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/acquisition-input"
                }
              ],
              "required": [
                "label",
                "session"
              ],
              "example": {
                "label": "example-acquisition",
                "session": "57e45328466d8e000e33a85b",
                "public": false
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/container-new-output"
            }
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "AcquisitionId",
          "required": true
        }
      ],
      "get": {
        "summary": "Get a single acquisition",
        "operationId": "get_acquisition",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/acquisition-output"
                }
              ],
              "required": [
                "_id",
                "public",
                "label",
                "session",
                "created",
                "modified",
                "permissions"
              ]
            }
          }
        }
      },
      "put": {
        "summary": "Update a acquisition",
        "operationId": "modify_acquisition",
        "tags": [
          "acquisitions"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "example": {
                "label": "example-acquisition-new-label"
              },
              "type": "object",
              "properties": {
                "public": {
                  "type": "boolean"
                },
                "label": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 256
                },
                "info": {
                  "$ref": "#/definitions/container-info"
                },
                "session": {
                  "type": "string",
                  "pattern": "^[a-fA-F0-9]{24}$"
                },
                "uid": {
                  "type": "string"
                },
                "timestamp": {
                  "$ref": "#/definitions/container-timestamp"
                },
                "timezone": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a acquisition",
        "operationId": "delete_acquisition",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/tags": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        }
      ],
      "post": {
        "summary": "Add a tag to acquisition.",
        "description": "Progates changes to projects, sessions and acquisitions",
        "operationId": "add_acquisition_tag",
        "tags": [
          "acquisitions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/tags/{TagValue}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "description": "The tag to interact with",
          "type": "string",
          "in": "path",
          "name": "TagValue"
        }
      ],
      "get": {
        "summary": "Get the value of a tag, by name.",
        "operationId": "get_acquisition_tag",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "description": "Returns a single tag by name",
            "schema": {
              "$ref": "#/definitions/tag"
            },
            "examples": {
              "response": {
                "value": "example-tag"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Rename a tag.",
        "operationId": "rename_acquisition_tag",
        "tags": [
          "acquisitions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a tag",
        "operationId": "delete_acquisition_tag",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/packfile-start": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        }
      ],
      "post": {
        "summary": "Start a packfile upload to acquisition",
        "operationId": "start_acquisition_packfile_upload",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/packfile-start"
            },
            "examples": {
              "response": {
                "token": "57fe88cc9e512c5d2b5dcb0b"
              }
            }
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/packfile": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        }
      ],
      "post": {
        "summary": "Add files to an in-progress packfile",
        "operationId": "acquisition_packfile_upload",
        "tags": [
          "acquisitions"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/file-output"
              }
            },
            "examples": {
              "response": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/packfile-end": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        }
      ],
      "post": {
        "summary": "End a packfile upload",
        "operationId": "end_acquisition_packfile_upload",
        "tags": [
          "acquisitions"
        ],
        "produces": [
          "text/event-stream"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/files": {
      "parameters": [
        {
          "name": "AcquisitionId",
          "in": "path",
          "type": "string",
          "required": true
        }
      ],
      "post": {
        "summary": "Upload a file to acquisition.",
        "operationId": "upload_acquisition_file",
        "tags": [
          "acquisitions"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "file",
            "in": "formData",
            "type": "file",
            "required": true,
            "description": "The file to upload"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/files/{FileName}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "FileName"
        }
      ],
      "get": {
        "summary": "Download a file.",
        "description": "If \"ticket\" is specified by empty, a download ticket will be created\nIf \"ticket\" is not specified, the file will be download\nIf \"ticket\" is specified and not empty, the file will be downloaded\n",
        "operationId": "download_acquisition_file",
        "tags": [
          "acquisitions"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "name": "ticket",
            "in": "query",
            "type": "string",
            "description": "ticket id of the file to download"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/download-ticket"
            },
            "examples": {
              "response": {
                "ticket": "1e975e3d-21e9-41f4-bb97-261f03d35ba1"
              }
            }
          }
        }
      },
      "post": {
        "summary": "Replace a file",
        "operationId": "replace_acquisition_file",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        }
      ],
      "post": {
        "summary": "Add a note to acquisition.",
        "operationId": "add_acquisition_note",
        "tags": [
          "acquisitions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "get": {
        "summary": "Get a note on acquisition.",
        "operationId": "get_acquisition_note",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/note-output"
            },
            "examples": {
              "response": {
                "_id": "580925ce9e512c57dc8a103b",
                "text": "some text",
                "created": "2016-10-21T17:19:40.899000+00:00",
                "modified": "2016-10-21T17:19:40.899000+00:00",
                "user": "coltonlw@flywheel.io"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a note on acquisition.",
        "operationId": "modify_acquisition_note",
        "tags": [
          "acquisitions"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Remove a note from acquisition",
        "operationId": "delete_acquisition_note",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/analyses": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        }
      ],
      "post": {
        "summary": "Create an analysis and upload files.",
        "operationId": "add_acquisition_analysis",
        "tags": [
          "acquisitions"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/analyses/{AnalysisId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Get an analysis.",
        "operationId": "get_acquisition_analysis",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/analysis-output"
            },
            "examples": {
              "response": {
                "files": [
                  {
                    "origin": {
                      "type": "job",
                      "id": "58063f24e5dc5b001657a87f"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T15:26:35.701000+00:00",
                    "modality": null,
                    "input": true,
                    "size": 21804112,
                    "type": "None",
                    "info": {}
                  },
                  {
                    "origin": {
                      "type": "job",
                      "id": "58065fa7e5dc5b001457a882"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T17:45:17.776000+00:00",
                    "modality": null,
                    "output": true,
                    "info": {},
                    "type": "None",
                    "size": 21804112
                  }
                ],
                "created": "2016-10-18T17:45:11.778000+00:00",
                "modified": "2016-10-18T17:45:11.778000+00:00",
                "label": "cortex-demo 10/18/2016 13:45:5",
                "job": {
                  "inputs": {
                    "anatomy": {
                      "type": "analysis",
                      "id": "58063f24e5dc5b001657a87e",
                      "name": "cortical_surface_right_hemisphere.obj"
                    }
                  },
                  "attempt": 1,
                  "name": "cortex-demo",
                  "tags": [
                    "ad-hoc",
                    "cortex-demo",
                    "analysis"
                  ],
                  "destination": {
                    "type": "analysis",
                    "id": "58065fa7e5dc5b001457a881"
                  },
                  "request": {
                    "inputs": [
                      {
                        "location": "/",
                        "type": "http",
                        "uri": "https://storage.googleapis.com/flywheel/gears/v1/scitran/cortex-demo/cortex-demo_manifest-labels_20160725T031837.331720Z.tar.gz",
                        "vu": "vu0:sha384:ssx5VWyFg7r8IBoOIphq7GaB_CymInQ1NxTV2WTDzglJLJ1-ktEbjLIHVABRzesV"
                      },
                      {
                        "type": "scitran",
                        "uri": "/jobs/58065fa7e5dc5b001457a882/config.json",
                        "location": "/flywheel/v0"
                      },
                      {
                        "type": "scitran",
                        "uri": "/sessions/58063e7ed213ed776045b320/analyses/58063f24e5dc5b001657a87e/files/cortical_surface_right_hemisphere.obj",
                        "location": "/flywheel/v0/input/anatomy"
                      }
                    ],
                    "target": {
                      "command": [
                        "bash",
                        "-c",
                        "rm -rf output; mkdir -p output; ./run; echo \"Exit was $?\""
                      ],
                      "env": {
                        "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
                      },
                      "dir": "/flywheel/v0"
                    },
                    "outputs": [
                      {
                        "type": "scitran",
                        "uri": "/engine?level=analysis&id=58065fa7e5dc5b001457a881&job=58065fa7e5dc5b001457a882",
                        "location": "/flywheel/v0/output"
                      }
                    ]
                  },
                  "modified": "2016-10-18T17:45:21.344000+00:00",
                  "created": "2016-10-18T17:45:11.816000+00:00",
                  "state": "complete",
                  "config": {},
                  "id": "58065fa7e5dc5b001457a882"
                },
                "user": "canakgun@flywheel.io",
                "_id": "58065fa7e5dc5b001457a881"
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete an anaylsis",
        "operationId": "delete_acquisition_analysis",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/analyses/{AnalysisId}/files": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Download analysis files.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for all files in the anlaysis\nIf no \"ticket\" query param is included, server error 500\n",
        "operationId": "download_acquisition_analysis_files",
        "tags": [
          "acquisitions"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/analyses/{AnalysisId}/files/{Filename}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "description": "regex to select files for download",
          "name": "Filename"
        }
      ],
      "get": {
        "summary": "Download anaylsis files with filter.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for matching files in the anlaysis.\nIf no \"ticket\" query param is included, files will be downloaded directly.\n",
        "operationId": "download_acquisition_analysis_files_by_filename",
        "tags": [
          "acquisitions"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/analyses/{AnalysisId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "post": {
        "summary": "Add a note to acquisition analysis.",
        "operationId": "add_acquisition_analysis_note",
        "tags": [
          "acquisitions"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/acquisitions/{AcquisitionId}/analyses/{AnalysisId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AcquisitionId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "delete": {
        "summary": "Remove a note from acquisition analysis.",
        "operationId": "delete_acquisition_analysis_note",
        "tags": [
          "acquisitions"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/projects": {
      "get": {
        "summary": "Get a list of projects",
        "operationId": "get_all_projects",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/project-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "group",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new project",
        "operationId": "create_project",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Project",
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/project-input"
                }
              ],
              "required": [
                "label",
                "group"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/container-new-output"
            }
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/projects/{ProjectId}": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "ProjectId",
          "required": true
        }
      ],
      "get": {
        "summary": "Get a single project",
        "operationId": "get_project",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "title": "Project",
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/project-output"
                }
              ],
              "required": [
                "_id",
                "label",
                "group",
                "created",
                "modified",
                "permissions"
              ]
            }
          }
        }
      },
      "put": {
        "summary": "Update a project",
        "operationId": "modify_project",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Project",
              "type": "object",
              "$ref": "#/definitions/project-input"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a project",
        "operationId": "delete_project",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/projects/groups": {
      "get": {
        "summary": "List all groups which have a project in them",
        "operationId": "get_all_projects_groups",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/group-output-list"
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/sessions": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "ProjectId",
          "required": true
        }
      ],
      "get": {
        "summary": "List all sessions for the given project.",
        "operationId": "get_project_sessions",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "allOf": [
                  {
                    "$ref": "#/definitions/session-output"
                  }
                ],
                "required": [
                  "_id",
                  "label",
                  "project",
                  "created",
                  "modified",
                  "permissions",
                  "public",
                  "group",
                  "subject"
                ]
              }
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/acquisitions": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "ProjectId",
          "required": true
        }
      ],
      "get": {
        "summary": "List all acquisitions for the given project.",
        "operationId": "get_project_acquisitions",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "allOf": [
                  {
                    "$ref": "#/definitions/acquisition-output"
                  }
                ],
                "required": [
                  "_id",
                  "public",
                  "label",
                  "session",
                  "created",
                  "modified",
                  "permissions"
                ]
              }
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/rules": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "ProjectId",
          "required": true
        }
      ],
      "get": {
        "operationId": "get_project_rules",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/rule-output"
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new rule for a project.",
        "operationId": "add_project_rule",
        "tags": [
          "projects"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        },
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Rule",
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/rule-input"
                }
              ],
              "required": [
                "alg",
                "name",
                "any",
                "all"
              ]
            }
          }
        ]
      }
    },
    "/projects/{ProjectId}/rules/{RuleId}": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "ProjectId",
          "required": true
        },
        {
          "in": "path",
          "type": "string",
          "name": "RuleId",
          "required": true
        }
      ],
      "put": {
        "summary": "Update a rule on a project.",
        "operationId": "modify_project_rule",
        "tags": [
          "projects"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        },
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "title": "Rule",
              "type": "object",
              "$ref": "#/definitions/rule-input"
            }
          }
        ]
      }
    },
    "/projects/{ProjectId}/template": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "ProjectId",
          "required": true
        }
      ],
      "post": {
        "summary": "Set the session template for a project.",
        "operationId": "set_project_template",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/project-template"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "404": {
            "$ref": "#/responses/404:resource-not-found"
          }
        }
      },
      "delete": {
        "summary": "Remove the session template for a project.",
        "operationId": "remove_project_template",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          },
          "404": {
            "$ref": "#/responses/404:resource-not-found"
          }
        }
      }
    },
    "/projects/{ProjectId}/recalc": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "ProjectId",
          "required": true
        }
      ],
      "post": {
        "summary": "Recalculate if sessions in the project satisfy the template.",
        "description": "Returns list of modified session ids.",
        "operationId": "recalc_project",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "Project's sessions' compliance was recalculated.\nReturns list of session that were modified.\n",
            "schema": {
              "$ref": "#/definitions/session-template-recalc-output"
            }
          },
          "404": {
            "$ref": "#/responses/404:resource-not-found"
          }
        }
      }
    },
    "/projects/recalc": {
      "post": {
        "summary": "Recalculate all sessions against their project templates.",
        "description": "Iterates all projects that have a session template.\nRecalculate if projects' sessions satisfy the template.\nReturns list of modified session ids.\n",
        "operationId": "recalc_all_projects",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "Projects' sessions' compliance was recalculated.\nReturns list of session that were modified.\n",
            "schema": {
              "$ref": "#/definitions/session-template-recalc-output"
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/tags": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        }
      ],
      "post": {
        "summary": "Add a tag to project.",
        "description": "Progates changes to projects, sessions and acquisitions",
        "operationId": "add_project_tag",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/projects/{ProjectId}/tags/{TagValue}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "description": "The tag to interact with",
          "type": "string",
          "in": "path",
          "name": "TagValue"
        }
      ],
      "get": {
        "summary": "Get the value of a tag, by name.",
        "operationId": "get_project_tag",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "Returns a single tag by name",
            "schema": {
              "$ref": "#/definitions/tag"
            },
            "examples": {
              "response": {
                "value": "example-tag"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Rename a tag.",
        "operationId": "rename_project_tag",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "example": {
                "value": "example-tag"
              },
              "properties": {
                "value": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 32
                }
              },
              "additionalProperties": false,
              "required": [
                "value"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a tag",
        "operationId": "delete_project_tag",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/projects/{ProjectId}/packfile-start": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        }
      ],
      "post": {
        "summary": "Start a packfile upload to project",
        "operationId": "start_project_packfile_upload",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/packfile-start"
            },
            "examples": {
              "response": {
                "token": "57fe88cc9e512c5d2b5dcb0b"
              }
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/packfile": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        }
      ],
      "post": {
        "summary": "Add files to an in-progress packfile",
        "operationId": "project_packfile_upload",
        "tags": [
          "projects"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/file-output"
              }
            },
            "examples": {
              "response": [
                {
                  "origin": {
                    "type": "job",
                    "id": "58063f24e5dc5b001657a87f"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T15:26:35.701000+00:00",
                  "modality": null,
                  "size": 21804112,
                  "type": "None",
                  "info": {}
                },
                {
                  "origin": {
                    "type": "job",
                    "id": "58065fa7e5dc5b001457a882"
                  },
                  "mimetype": "application/octet-stream",
                  "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                  "name": "cortical_surface_right_hemisphere.obj",
                  "tags": [],
                  "measurements": [],
                  "modified": "2016-10-18T17:45:17.776000+00:00",
                  "modality": null,
                  "info": {},
                  "type": "None",
                  "size": 21804112
                }
              ]
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/packfile-end": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        }
      ],
      "post": {
        "summary": "End a packfile upload",
        "operationId": "end_project_packfile_upload",
        "tags": [
          "projects"
        ],
        "produces": [
          "text/event-stream"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/projects/{ProjectId}/files": {
      "parameters": [
        {
          "name": "ProjectId",
          "in": "path",
          "type": "string",
          "required": true
        }
      ],
      "post": {
        "summary": "Upload a file to project.",
        "operationId": "upload_project_file",
        "tags": [
          "projects"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "file",
            "in": "formData",
            "type": "file",
            "required": true,
            "description": "The file to upload"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/projects/{ProjectId}/files/{FileName}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "FileName"
        }
      ],
      "get": {
        "summary": "Download a file.",
        "description": "If \"ticket\" is specified by empty, a download ticket will be created\nIf \"ticket\" is not specified, the file will be download\nIf \"ticket\" is specified and not empty, the file will be downloaded\n",
        "operationId": "download_project_file",
        "tags": [
          "projects"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "name": "ticket",
            "in": "query",
            "type": "string",
            "description": "ticket id of the file to download"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/download-ticket"
            },
            "examples": {
              "response": {
                "ticket": "1e975e3d-21e9-41f4-bb97-261f03d35ba1"
              }
            }
          }
        }
      },
      "post": {
        "summary": "Replace a file",
        "operationId": "replace_project_file",
        "tags": [
          "projects"
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/projects/{ProjectId}/permissions": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        }
      ],
      "post": {
        "summary": "Add a permission",
        "operationId": "add_project_permission",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/permission"
                }
              ],
              "required": [
                "_id",
                "access"
              ],
              "example": {
                "_id": "coltonlw@flywheel.io",
                "access": "admin"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/projects/{ProjectId}/permissions/{UserId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "UserId"
        }
      ],
      "get": {
        "summary": "List a user's permissions for this project.",
        "operationId": "get_project_user_permission",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/permission-output-default-required"
            },
            "examples": {
              "response": {
                "access": "admin",
                "_id": "coltonlw@flywheel.io"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a user's permission for this project.",
        "operationId": "modify_project_user_permission",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/permission"
                }
              ],
              "required": [
                "_id",
                "access"
              ],
              "example": {
                "_id": "coltonlw@flywheel.io",
                "access": "admin"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Delete a permission",
        "operationId": "delete_project_user_permission",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/projects/{ProjectId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        }
      ],
      "post": {
        "summary": "Add a note to project.",
        "operationId": "add_project_note",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/projects/{ProjectId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "get": {
        "summary": "Get a note on project.",
        "operationId": "get_project_note",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/note-output"
            },
            "examples": {
              "response": {
                "_id": "580925ce9e512c57dc8a103b",
                "text": "some text",
                "created": "2016-10-21T17:19:40.899000+00:00",
                "modified": "2016-10-21T17:19:40.899000+00:00",
                "user": "coltonlw@flywheel.io"
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a note on project.",
        "operationId": "modify_project_note",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      },
      "delete": {
        "summary": "Remove a note from project",
        "operationId": "delete_project_note",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/projects/{ProjectId}/analyses": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        }
      ],
      "post": {
        "summary": "Create an analysis and upload files.",
        "operationId": "add_project_analysis",
        "tags": [
          "projects"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "in": "formData",
            "name": "formData",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/projects/{ProjectId}/analyses/{AnalysisId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Get an analysis.",
        "operationId": "get_project_analysis",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "$ref": "#/definitions/analysis-output"
            },
            "examples": {
              "response": {
                "files": [
                  {
                    "origin": {
                      "type": "job",
                      "id": "58063f24e5dc5b001657a87f"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T15:26:35.701000+00:00",
                    "modality": null,
                    "input": true,
                    "size": 21804112,
                    "type": "None",
                    "info": {}
                  },
                  {
                    "origin": {
                      "type": "job",
                      "id": "58065fa7e5dc5b001457a882"
                    },
                    "mimetype": "application/octet-stream",
                    "hash": "v0-sha384-12188e00a26650b2baa3f0195337dcf504f4362bb2136eef0cdbefb57159356b1355a0402fca0ab5ab081f21c305e5c2",
                    "name": "cortical_surface_right_hemisphere.obj",
                    "tags": [],
                    "measurements": [],
                    "modified": "2016-10-18T17:45:17.776000+00:00",
                    "modality": null,
                    "output": true,
                    "info": {},
                    "type": "None",
                    "size": 21804112
                  }
                ],
                "created": "2016-10-18T17:45:11.778000+00:00",
                "modified": "2016-10-18T17:45:11.778000+00:00",
                "label": "cortex-demo 10/18/2016 13:45:5",
                "job": {
                  "inputs": {
                    "anatomy": {
                      "type": "analysis",
                      "id": "58063f24e5dc5b001657a87e",
                      "name": "cortical_surface_right_hemisphere.obj"
                    }
                  },
                  "attempt": 1,
                  "name": "cortex-demo",
                  "tags": [
                    "ad-hoc",
                    "cortex-demo",
                    "analysis"
                  ],
                  "destination": {
                    "type": "analysis",
                    "id": "58065fa7e5dc5b001457a881"
                  },
                  "request": {
                    "inputs": [
                      {
                        "location": "/",
                        "type": "http",
                        "uri": "https://storage.googleapis.com/flywheel/gears/v1/scitran/cortex-demo/cortex-demo_manifest-labels_20160725T031837.331720Z.tar.gz",
                        "vu": "vu0:sha384:ssx5VWyFg7r8IBoOIphq7GaB_CymInQ1NxTV2WTDzglJLJ1-ktEbjLIHVABRzesV"
                      },
                      {
                        "type": "scitran",
                        "uri": "/jobs/58065fa7e5dc5b001457a882/config.json",
                        "location": "/flywheel/v0"
                      },
                      {
                        "type": "scitran",
                        "uri": "/sessions/58063e7ed213ed776045b320/analyses/58063f24e5dc5b001657a87e/files/cortical_surface_right_hemisphere.obj",
                        "location": "/flywheel/v0/input/anatomy"
                      }
                    ],
                    "target": {
                      "command": [
                        "bash",
                        "-c",
                        "rm -rf output; mkdir -p output; ./run; echo \"Exit was $?\""
                      ],
                      "env": {
                        "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
                      },
                      "dir": "/flywheel/v0"
                    },
                    "outputs": [
                      {
                        "type": "scitran",
                        "uri": "/engine?level=analysis&id=58065fa7e5dc5b001457a881&job=58065fa7e5dc5b001457a882",
                        "location": "/flywheel/v0/output"
                      }
                    ]
                  },
                  "modified": "2016-10-18T17:45:21.344000+00:00",
                  "created": "2016-10-18T17:45:11.816000+00:00",
                  "state": "complete",
                  "config": {},
                  "id": "58065fa7e5dc5b001457a882"
                },
                "user": "canakgun@flywheel.io",
                "_id": "58065fa7e5dc5b001457a881"
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete an anaylsis",
        "operationId": "delete_project_analysis",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:deleted-with-count"
          }
        }
      }
    },
    "/projects/{ProjectId}/analyses/{AnalysisId}/files": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "get": {
        "summary": "Download analysis files.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for all files in the anlaysis\nIf no \"ticket\" query param is included, server error 500\n",
        "operationId": "download_project_analysis_files",
        "tags": [
          "projects"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/analyses/{AnalysisId}/files/{Filename}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "description": "regex to select files for download",
          "name": "Filename"
        }
      ],
      "get": {
        "summary": "Download anaylsis files with filter.",
        "description": "If \"ticket\" query param is included and not empty, download files.\nIf \"ticket\" query param is included and empty, create a ticket for matching files in the anlaysis.\nIf no \"ticket\" query param is included, files will be downloaded directly.\n",
        "operationId": "download_project_analysis_files_by_filename",
        "tags": [
          "projects"
        ],
        "produces": [
          "application/json",
          "application/octet-stream"
        ],
        "parameters": [
          {
            "description": "ticket id of the files to download",
            "type": "string",
            "in": "query",
            "name": "ticket"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/analysis-files-create-ticket-output"
            },
            "examples": {
              "response": {
                "ticket": "57f2af23-a94c-426d-8521-11b2e8782020",
                "filename": "exampledicom.zip",
                "file_cnt": 1,
                "size": 4525137
              }
            }
          }
        }
      }
    },
    "/projects/{ProjectId}/analyses/{AnalysisId}/notes": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        }
      ],
      "post": {
        "summary": "Add a note to project analysis.",
        "operationId": "add_project_analysis_note",
        "tags": [
          "projects"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "#/definitions/note-input"
                }
              ],
              "required": [
                "text"
              ],
              "example": {
                "text": "Scitran core!"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          },
          "400": {
            "$ref": "#/responses/400:invalid-body-json"
          }
        }
      }
    },
    "/projects/{ProjectId}/analyses/{AnalysisId}/notes/{NoteId}": {
      "parameters": [
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "ProjectId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "AnalysisId"
        },
        {
          "required": true,
          "type": "string",
          "in": "path",
          "name": "NoteId"
        }
      ],
      "delete": {
        "summary": "Remove a note from project analysis.",
        "operationId": "delete_project_analysis_note",
        "tags": [
          "projects"
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/200:modified-with-count"
          }
        }
      }
    },
    "/report/site": {
      "get": {
        "operationId": "get_site_report",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/report-site"
            }
          }
        }
      }
    },
    "/report/project": {
      "get": {
        "operationId": "get_project_report",
        "tags": [
          "reports"
        ],
        "parameters": [
          {
            "in": "query",
            "type": "string",
            "name": "projects",
            "description": "Specify multiple times to include projects in the report"
          },
          {
            "in": "query",
            "type": "string",
            "name": "start_date",
            "description": "Report start date"
          },
          {
            "in": "query",
            "type": "string",
            "name": "end_date",
            "description": "Report end date"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/report-project"
            }
          }
        }
      }
    },
    "/batch": {
      "get": {
        "summary": "Get a list of batch jobs the user has created.",
        "description": "Requires login.",
        "operationId": "get_all_batch_jobs",
        "tags": [
          "batch"
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      },
      "post": {
        "summary": "Create a batch job proposal and insert it as 'pending'.",
        "operationId": "create_batch_job",
        "tags": [
          "batch"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "",
            "schema": {
              "type": "object"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/batch/{BatchId}": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "BatchId",
          "required": true
        }
      ],
      "get": {
        "summary": "Get batch job details.",
        "parameters": [
          {
            "in": "query",
            "type": "boolean",
            "name": "jobs",
            "description": "If true, return job objects instead of job ids"
          }
        ],
        "operationId": "get_batch_job",
        "tags": [
          "batch"
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "404": {
            "$ref": "#/responses/404:resource-not-found"
          }
        }
      }
    },
    "/batch/{BatchId}/run": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "BatchId",
          "required": true
        }
      ],
      "post": {
        "summary": "Launch a job.",
        "description": "Creates jobs from proposed inputs, returns jobs enqueued.\nMoves 'pending' batch job to 'running'.\n",
        "operationId": "run_batch_job",
        "tags": [
          "batch"
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/job-output"
              }
            }
          }
        }
      }
    },
    "/batch/{BatchId}/cancel": {
      "parameters": [
        {
          "in": "path",
          "type": "string",
          "name": "BatchId",
          "required": true
        }
      ],
      "post": {
        "summary": "Cancel a Job",
        "description": "Cancels jobs that are still pending, returns number of jobs cancelled.\nMoves a 'running' batch job to 'cancelled'.\n",
        "operationId": "cancel_batch_job",
        "tags": [
          "batch"
        ],
        "responses": {
          "200": {
            "description": "",
            "examples": {
              "response": {
                "canceled_jobs": 4
              }
            }
          }
        }
      }
    }
  },
  "securityDefinitions": {
    "ApiKey": {
      "type": "apiKey",
      "in": "header",
      "name": "Authorization",
      "description": "Your API key is available on your Profile page from within the Flywheel Application.\n**NOTE:** The API key should be prefixed with `scitran-user` if you're testing APIs on this page.\n\ne.g. `scitran-user dev.flywheel.io:DFCAds356sdvd`.\n"
    }
  },
  "security": [
    {
      "ApiKey": []
    }
  ],
  "responses": {
    "200:deleted-with-count": {
      "description": "The given number of records were deleted.",
      "schema": {
        "type": "object",
        "properties": {
          "deleted": {
            "type": "integer"
          }
        },
        "required": [
          "deleted"
        ],
        "example": {
          "deleted": 1
        }
      }
    },
    "200:modified-with-count": {
      "description": "The given number of records were updated.",
      "schema": {
        "type": "object",
        "properties": {
          "modified": {
            "type": "integer"
          }
        },
        "required": [
          "modified"
        ],
        "example": {
          "modified": 1
        }
      }
    },
    "400:invalid-body-json": {
      "description": "JSON did not validate against schema for this endpoint.\n"
    },
    "404:resource-not-found": {
      "description": "The specified resource could not be found.\n"
    }
  },
  "definitions": {
    "acquisition-input": {
      "type": "object",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "session": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "uid": {
          "type": "string"
        },
        "timestamp": {
          "$ref": "#/definitions/container-timestamp"
        },
        "timezone": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "acquisition-metadata-input": {
      "type": "object",
      "x-note": "Are all of these fields still used/valid? Can this be reconciled with enginemetadata.json#/definitions/uid-upload-input?",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string"
        },
        "info": {
          "type": "object"
        },
        "metadata": {
          "type": "object"
        },
        "measurement": {
          "type": "string"
        },
        "instrument": {
          "type": "string"
        },
        "uid": {
          "type": "string"
        },
        "timestamp": {
          "$ref": "#/definitions/container-timestamp"
        },
        "timezone": {
          "type": "string"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-input"
          }
        }
      },
      "additionalProperties": false
    },
    "acquisition-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "session": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "uid": {
          "type": "string"
        },
        "collections": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{24}$"
          }
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-output"
          }
        },
        "timestamp": {
          "$ref": "#/definitions/container-timestamp"
        },
        "timezone": {
          "type": "string"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        },
        "info_exists": {
          "type": "boolean"
        },
        "permissions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/permission-output-default-required"
          }
        },
        "notes": {
          "$ref": "#/definitions/notes-list-output"
        },
        "tags": {
          "$ref": "#/definitions/tag-output-list"
        },
        "analyses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/analysis-output"
          }
        }
      },
      "additionalProperties": false
    },
    "analysis-inputs": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/file"
      }
    },
    "analysis-outputs": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/file"
      }
    },
    "analysis-input": {
      "type": "object",
      "properties": {
        "inputs": {
          "$ref": "#/definitions/analysis-inputs"
        },
        "outputs": {
          "$ref": "#/definitions/analysis-outputs"
        },
        "notes": {
          "$ref": "#/definitions/notes-list-output"
        },
        "description": {
          "type": "string"
        },
        "job": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "user": {
          "type": "string",
          "format": "email"
        }
      },
      "additionalProperties": false
    },
    "analysis-update": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        }
      },
      "additionalProperties": false
    },
    "analysis-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file"
          }
        },
        "job": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "notes": {
          "$ref": "#/definitions/notes-list-output"
        },
        "description": {
          "type": "string"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "user": {
          "type": "string",
          "format": "email"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        }
      },
      "required": [
        "_id",
        "files",
        "label",
        "user",
        "created",
        "modified"
      ]
    },
    "analysis-job": {
      "type": "object",
      "properties": {
        "analysis": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/analysis-input"
            }
          ],
          "required": [
            "label"
          ]
        },
        "job": {
          "type": "object",
          "$ref": "#/definitions/job-input"
        }
      }
    },
    "analysis-files-create-ticket-output": {
      "type": "object",
      "properties": {
        "ticket": {
          "type": "string"
        },
        "filename": {
          "type": "string"
        },
        "file_cnt": {
          "type": "integer"
        },
        "size": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "required": [
        "ticket",
        "filename",
        "file_cnt",
        "size"
      ]
    },
    "avatars": {
      "title": "Avatar",
      "type": "object",
      "properties": {
        "gravatar": {
          "type": "string",
          "format": "uri"
        },
        "provider": {
          "type": "string",
          "format": "uri"
        },
        "custom": {
          "type": "string",
          "pattern": "^https:",
          "format": "uri"
        }
      },
      "additionalProperties": false
    },
    "collection-input": {
      "type": "object",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "description": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "collection-input-with-contents": {
      "type": "object",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "description": {
          "type": "string"
        },
        "contents": {
          "type": "object"
        }
      },
      "additionalProperties": false
    },
    "collection-new-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        }
      },
      "required": [
        "_id"
      ]
    },
    "collection-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "description": {
          "type": "string"
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "info_exists": {
          "type": "boolean"
        },
        "curator": {
          "type": "string",
          "format": "email"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        },
        "permissions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/permission-output-default-required"
          }
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-output"
          }
        },
        "notes": {
          "$ref": "#/definitions/notes-list-output"
        },
        "tags": {
          "$ref": "#/definitions/tag-output-list"
        },
        "analyses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/analysis-output"
          }
        }
      },
      "additionalProperties": false
    },
    "common-info": {
      "type": "object"
    },
    "common-timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "common-deleted-count": {
      "type": "object",
      "properties": {
        "deleted": {
          "type": "integer"
        }
      }
    },
    "common-modified-count": {
      "type": "object",
      "properties": {
        "modified": {
          "type": "integer"
        }
      }
    },
    "common-object-created": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        }
      }
    },
    "config-site-config-output": {
      "type": "object",
      "properties": {
        "central_url": {
          "type": "string"
        },
        "ssl_cert": {
          "type": "string"
        },
        "api_url": {
          "type": "string"
        },
        "registered": {
          "type": "boolean"
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "central_url",
        "ssl_cert",
        "api_url",
        "registered",
        "id",
        "name"
      ]
    },
    "config-auth-output": {
      "type": "object",
      "properties": {
        "verify_endpoint": {
          "type": "string"
        },
        "client_id": {
          "type": "string"
        },
        "client_secret": {
          "type": "string"
        },
        "auth_endpoint": {
          "type": "string"
        },
        "refresh_endpoint": {
          "type": "string"
        }
      }
    },
    "config-output": {
      "type": "object",
      "properties": {
        "site": {
          "$ref": "#/definitions/config-site-config-output"
        },
        "modified": {
          "type": "string"
        },
        "auth": {
          "type": "object"
        },
        "created": {
          "type": "string"
        }
      },
      "required": [
        "site",
        "modified",
        "auth",
        "created"
      ]
    },
    "container-info": {
      "$ref": "#/definitions/common-info"
    },
    "container-timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "container-new-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        }
      },
      "required": [
        "_id"
      ]
    },
    "device-errors": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "device": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        },
        "method": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "errors": {
          "$ref": "#/definitions/device-errors"
        },
        "info": {
          "$ref": "#/definitions/common-info"
        },
        "interval": {
          "type": "integer"
        },
        "last_seen": {
          "$ref": "#/definitions/common-timestamp"
        }
      },
      "additionalProperties": false
    },
    "device-input": {
      "type": "object",
      "properties": {
        "interval": {
          "type": "integer"
        },
        "errors": {
          "$ref": "#/definitions/device-errors"
        },
        "info": {
          "$ref": "#/definitions/common-info"
        }
      },
      "additionalProperties": false
    },
    "device-output": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/device"
        }
      ],
      "required": [
        "_id",
        "name",
        "method",
        "last_seen"
      ]
    },
    "device-status": {
      "type": "object"
    },
    "download-filter-definition": {
      "type": "object",
      "properties": {
        "+": {
          "$ref": "#/definitions/download-filter-items"
        },
        "-": {
          "$ref": "#/definitions/download-filter-items"
        }
      },
      "additionalProperties": false
    },
    "download-filter-items": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string"
      }
    },
    "download-node": {
      "type": "object",
      "properties": {
        "level": {
          "type": "string",
          "enum": [
            "project",
            "session",
            "acquisition",
            "analysis"
          ]
        },
        "_id": {
          "type": "string",
          "pattern": "^[0-9a-f]{24}$"
        }
      },
      "required": [
        "level",
        "_id"
      ],
      "additionalProperties": false
    },
    "download-filter": {
      "type": "object",
      "properties": {
        "tags": {
          "$ref": "#/definitions/download-filter-definition"
        },
        "types": {
          "$ref": "#/definitions/download-filter-definition"
        }
      }
    },
    "download-input": {
      "title": "Download",
      "type": "object",
      "properties": {
        "optional": {
          "type": "boolean"
        },
        "nodes": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/download-node"
          }
        },
        "filters": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/download-filter"
          }
        }
      },
      "required": [
        "optional",
        "nodes"
      ],
      "additionalProperties": false
    },
    "download-ticket": {
      "type": "object",
      "properties": {
        "ticket": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "ticket"
      ]
    },
    "enginemetadata-upload-acquisition-metadata-input": {
      "type": "object",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string"
        },
        "info": {
          "type": "object"
        },
        "uid": {
          "type": "string"
        },
        "timestamp": {
          "$ref": "#/definitions/container-timestamp"
        },
        "timezone": {
          "type": "string"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-input"
          }
        }
      },
      "additionalProperties": false
    },
    "enginemetadata-engine-upload-input": {
      "type": "object",
      "properties": {
        "project": {
          "$ref": "#/definitions/project-metadata-input"
        },
        "session": {
          "$ref": "#/definitions/session-metadata-input"
        },
        "acquisition": {
          "$ref": "#/definitions/acquisition-metadata-input"
        }
      },
      "additionalProperties": false
    },
    "enginemetadata-label-upload-input": {
      "type": "object",
      "properties": {
        "group": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/group-metadata-input"
            }
          ],
          "required": [
            "_id"
          ]
        },
        "project": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/project-metadata-input"
            }
          ],
          "required": [
            "label"
          ]
        },
        "session": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/session-metadata-input"
            }
          ],
          "required": [
            "label"
          ]
        },
        "acquisition": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/enginemetadata-upload-acquisition-metadata-input"
            }
          ],
          "required": [
            "label"
          ]
        }
      },
      "required": [
        "group",
        "project"
      ],
      "additionalProperties": false
    },
    "enginemetadata-uid-upload-input": {
      "type": "object",
      "properties": {
        "group": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/group-metadata-input"
            }
          ],
          "required": [
            "_id"
          ]
        },
        "project": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/project-metadata-input"
            }
          ],
          "required": [
            "label"
          ]
        },
        "session": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/session-metadata-input"
            }
          ],
          "required": [
            "uid"
          ]
        },
        "acquisition": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/enginemetadata-upload-acquisition-metadata-input"
            }
          ],
          "required": [
            "uid"
          ]
        }
      },
      "required": [
        "acquisition",
        "group",
        "project",
        "session"
      ],
      "additionalProperties": false
    },
    "enginemetadata-uid-match-upload-input": {
      "type": "object",
      "properties": {
        "project": {
          "$ref": "#/definitions/project-metadata-input"
        },
        "session": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/session-metadata-input"
            }
          ],
          "required": [
            "uid"
          ]
        },
        "acquisition": {
          "type": "object",
          "allOf": [
            {
              "$ref": "#/definitions/enginemetadata-upload-acquisition-metadata-input"
            }
          ],
          "required": [
            "uid"
          ]
        }
      },
      "required": [
        "acquisition",
        "session"
      ],
      "additionalProperties": false
    },
    "file-measurements": {
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "file-tags": {
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "file-via": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "method": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      }
    },
    "file-origin": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "method": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "via": {
          "$ref": "#/definitions/file-via"
        }
      },
      "additionalProperties": false
    },
    "file": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "mimetype": {
          "type": "string"
        },
        "modality": {
          "type": "string"
        },
        "measurements": {
          "$ref": "#/definitions/file-measurements"
        },
        "tags": {
          "$ref": "#/definitions/file-tags"
        },
        "info": {
          "$ref": "#/definitions/common-info"
        },
        "origin": {
          "$ref": "#/definitions/file-origin"
        },
        "hash": {
          "type": "string",
          "minLength": 106,
          "maxLength": 106
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "info_exists": {
          "type": "boolean"
        },
        "input": {
          "type": "boolean"
        },
        "output": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "file-input": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "mimetype": {
          "type": "string"
        },
        "modality": {
          "type": "string"
        },
        "measurements": {
          "$ref": "#/definitions/file-measurements"
        },
        "tags": {
          "$ref": "#/definitions/file-tags"
        },
        "info": {
          "$ref": "#/definitions/common-info"
        }
      },
      "additionalProperties": false
    },
    "file-update": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "modality": {
          "type": "string"
        },
        "measurements": {
          "$ref": "#/definitions/file-measurements"
        }
      },
      "additionalProperties": false
    },
    "file-output": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/file"
        }
      ],
      "required": [
        "modified",
        "size"
      ]
    },
    "group": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "maxLength": 64,
          "minLength": 2,
          "pattern": "^[0-9a-z][0-9a-z.@_-]{0,30}[0-9a-z]$"
        },
        "label": {
          "maxLength": 64,
          "minLength": 1,
          "pattern": "^[0-9A-Za-z][0-9A-Za-z .@_-]{0,30}[0-9A-Za-z]$",
          "title": "label",
          "type": "string"
        },
        "permissions": {
          "$ref": "#/definitions/permission-output-list"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "group-input": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "maxLength": 64,
          "minLength": 2,
          "pattern": "^[0-9a-z][0-9a-z.@_-]{0,30}[0-9a-z]$"
        },
        "label": {
          "maxLength": 64,
          "minLength": 1,
          "pattern": "^[0-9A-Za-z][0-9A-Za-z .@_-]{0,30}[0-9A-Za-z]$",
          "title": "label",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "group-metadata-input": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "group-output": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/group"
        }
      ],
      "required": [
        "permissions",
        "created",
        "modified",
        "_id"
      ]
    },
    "group-new-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "maxLength": 64,
          "minLength": 2,
          "pattern": "^[0-9a-z][0-9a-z.@_-]{0,30}[0-9a-z]$"
        }
      },
      "required": [
        "_id"
      ]
    },
    "group-output-list": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/group-output"
      }
    },
    "group-project-group-output": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/group"
        }
      ],
      "required": [
        "_id"
      ]
    },
    "group-project-group-output-list": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/group-project-group-output"
      }
    },
    "info-add-remove": {
      "properties": {
        "set": {
          "type": "object",
          "minProperties": 1
        },
        "delete": {
          "type": "array",
          "uniqueItems": true,
          "minItems": 1,
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "info-replace": {
      "properties": {
        "replace": {
          "type": "object"
        }
      },
      "additionalProperties": false
    },
    "info-update-input": {
      "type": "object",
      "properties": {
        "set": {
          "type": "object",
          "minProperties": 1
        },
        "delete": {
          "type": "array",
          "uniqueItems": true,
          "minItems": 1,
          "items": {
            "type": "string"
          }
        },
        "replace": {
          "type": "object"
        }
      },
      "description": "Helper endpoint for editing an object's info key"
    },
    "job-inputs-item": {
      "type": "object",
      "properties": {
        "type": {
          "enum": [
            "http",
            "scitran"
          ]
        },
        "uri": {
          "type": "string"
        },
        "location": {
          "type": "string"
        },
        "vu": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "uri",
        "location"
      ]
    },
    "job-inputs-entry": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "id",
        "name"
      ],
      "additionalProperties": false
    },
    "job-inputs-object": {
      "type": "object"
    },
    "job-inputs-array": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "input": {
            "type": "string"
          }
        }
      }
    },
    "job-destination": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "id"
      ],
      "additionalProperties": false
    },
    "job-origin": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "id"
      ],
      "additionalProperties": false
    },
    "job-saved-files": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "job-produced-metadata": {
      "type": "object"
    },
    "job-tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "job-config": {
      "type": "object",
      "properties": {}
    },
    "job-request": {
      "type": "object",
      "properties": {
        "inputs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/job-inputs-item"
          }
        },
        "target": {
          "type": "object"
        },
        "outputs": {
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      }
    },
    "job": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "origin": {
          "$ref": "#/definitions/job-origin"
        },
        "gear_id": {
          "type": "string"
        },
        "previous_job_id": {
          "type": "string"
        },
        "inputs": {
          "$ref": "#/definitions/job-inputs-object"
        },
        "destination": {
          "$ref": "#/definitions/job-destination"
        },
        "tags": {
          "$ref": "#/definitions/job-tags"
        },
        "state": {
          "type": "string"
        },
        "attempt": {
          "type": "integer"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        },
        "config": {
          "$ref": "#/definitions/job-config"
        },
        "request": {
          "$ref": "#/definitions/job-request"
        },
        "saved_files": {
          "$ref": "#/definitions/job-saved-files"
        },
        "produced_metadata": {
          "$ref": "#/definitions/job-produced-metadata"
        }
      },
      "additionalProperties": false
    },
    "job-input": {
      "type": "object",
      "properties": {
        "gear_id": {
          "type": "string"
        },
        "inputs": {
          "$ref": "#/definitions/job-inputs-object"
        },
        "destination": {
          "$ref": "#/definitions/job-destination"
        },
        "tags": {
          "$ref": "#/definitions/job-tags"
        },
        "config": {
          "$ref": "#/definitions/job-config"
        }
      },
      "required": [
        "gear_id"
      ],
      "additionalProperties": false
    },
    "job-output": {
      "type": "object",
      "allOf": [
        {
          "$ref": "#/definitions/job"
        }
      ],
      "required": [
        "id",
        "gear_id",
        "inputs",
        "config",
        "destination",
        "tags",
        "state",
        "attempt"
      ]
    },
    "note-input": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "notes-list-input": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/note-input"
      }
    },
    "note-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "text": {
          "type": "string"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        },
        "user": {
          "type": "string",
          "format": "email"
        }
      },
      "additionalProperties": false,
      "required": [
        "_id",
        "text",
        "created",
        "modified",
        "user"
      ]
    },
    "notes-list-output": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/note-output"
      }
    },
    "packfile-project-input": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "_id"
      ]
    },
    "packfile-session-input": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string"
        },
        "subject": {
          "$ref": "#/definitions/subject-input"
        }
      },
      "additionalProperties": false,
      "required": [
        "label"
      ]
    },
    "packfile-acquisition-input": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "timezone": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "label"
      ]
    },
    "packfile-packfile-input": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "type"
      ]
    },
    "packfile-input": {
      "title": "Packfile",
      "type": "object",
      "properties": {
        "project": {
          "$ref": "#/definitions/packfile-project-input"
        },
        "session": {
          "$ref": "#/definitions/packfile-session-input"
        },
        "acquisition": {
          "$ref": "#/definitions/packfile-acquisition-input"
        },
        "packfile": {
          "$ref": "#/definitions/packfile-packfile-input"
        }
      },
      "required": [
        "project",
        "session",
        "acquisition",
        "packfile"
      ],
      "additionalProperties": false
    },
    "packfile-start": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        }
      }
    },
    "permission-access": {
      "enum": [
        "ro",
        "rw",
        "admin"
      ]
    },
    "permission": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "email"
        },
        "access": {
          "$ref": "#/definitions/permission-access"
        }
      },
      "additionalProperties": false
    },
    "permission-output-default-required": {
      "allOf": [
        {
          "$ref": "#/definitions/permission"
        }
      ],
      "required": [
        "_id",
        "access"
      ]
    },
    "permission-output-list": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/permission-output-default-required"
      },
      "uniqueItems": true
    },
    "project-template-requirement": {
      "type": "object",
      "properties": {
        "minimum": {
          "type": "integer",
          "minimum": 0
        },
        "maximum": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "project-template": {
      "description": "A project's session template",
      "type": "object",
      "properties": {
        "session": {
          "type": "object"
        },
        "acquisitions": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/project-template-requirement"
          }
        }
      },
      "additionalProperties": false
    },
    "project-input": {
      "type": "object",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "description": {
          "type": "string"
        },
        "group": {
          "type": "string",
          "maxLength": 64,
          "minLength": 2,
          "pattern": "^[0-9a-z][0-9a-z.@_-]{0,30}[0-9a-z]$"
        }
      },
      "additionalProperties": false
    },
    "project-metadata-input": {
      "type": "object",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string"
        },
        "info": {
          "type": "object"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-input"
          }
        }
      },
      "additionalProperties": false
    },
    "project-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "info_exists": {
          "type": "boolean"
        },
        "description": {
          "type": "string"
        },
        "group": {
          "type": "string",
          "maxLength": 64,
          "minLength": 2,
          "pattern": "^[0-9a-z][0-9a-z.@_-]{0,30}[0-9a-z]$"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        },
        "template": {
          "type": "object"
        },
        "permissions": {
          "$ref": "#/definitions/permission-output-list"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-output"
          }
        },
        "notes": {
          "$ref": "#/definitions/notes-list-output"
        },
        "tags": {
          "$ref": "#/definitions/tag-output-list"
        },
        "analyses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/analysis-output"
          }
        }
      },
      "additionalProperties": false
    },
    "report-gender-count": {
      "type": "object",
      "properties": {
        "Male": {
          "type": "integer"
        },
        "Unknown or Not Reported": {
          "type": "integer"
        },
        "Female": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "required": [
        "Male",
        "Female",
        "Unknown or Not Reported"
      ]
    },
    "report-ethnicity-grid": {
      "type": "object",
      "properties": {
        "Not Hispanic or Latino": {
          "$ref": "#/definitions/report-gender-count"
        },
        "Hispanic or Latino": {
          "$ref": "#/definitions/report-gender-count"
        },
        "Unknown or Not Reported": {
          "$ref": "#/definitions/report-gender-count"
        },
        "Total": {
          "type": "integer"
        }
      }
    },
    "report-demographics-grid": {
      "type": "object",
      "properties": {
        "Black or African American": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "Unknown or Not Reported": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "American Indian or Alaska Native": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "Asian": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "White": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "Total": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "Native Hawaiian or Other Pacific Islander": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "More Than One Race": {
          "$ref": "#/definitions/report-ethnicity-grid"
        },
        "male_count": {
          "type": "integer"
        },
        "group_label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "over_18_count": {
          "type": "integer"
        },
        "under_18_count": {
          "type": "integer"
        },
        "female_count": {
          "type": "integer"
        },
        "subjects_count": {
          "type": "integer"
        },
        "other_count": {
          "type": "integer"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "session_count": {
          "type": "integer"
        },
        "admins": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "demographics_total": {
          "type": "integer"
        }
      }
    },
    "report-group-report": {
      "type": "object",
      "properties": {
        "project_count": {
          "type": "integer"
        },
        "label": {
          "maxLength": 64,
          "minLength": 1,
          "pattern": "^[0-9A-Za-z][0-9A-Za-z .@_-]{0,30}[0-9A-Za-z]$",
          "title": "label",
          "type": "string"
        },
        "session_count": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "required": [
        "project_count",
        "label",
        "session_count"
      ]
    },
    "report-project": {
      "type": "object",
      "properties": {
        "projects": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/report-demographics-grid"
          }
        }
      }
    },
    "report-site": {
      "type": "object",
      "properties": {
        "group_count": {
          "type": "integer"
        },
        "groups": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/report-group-report"
          }
        }
      },
      "additionalProperties": false,
      "required": [
        "group_count",
        "groups"
      ]
    },
    "rule-items": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "file.type",
              "file.name",
              "file.measurements",
              "container.has-type",
              "container.has-measurement"
            ]
          },
          "value": {
            "type": "string"
          },
          "regex": {
            "type": "boolean"
          }
        },
        "required": [
          "type",
          "value"
        ],
        "additionalProperties": false
      }
    },
    "rule-input": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        },
        "project_id": {
          "type": "string"
        },
        "alg": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "any": {
          "$ref": "#/definitions/rule-items"
        },
        "all": {
          "$ref": "#/definitions/rule-items"
        },
        "disabled": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "rule-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        },
        "alg": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "any": {
          "$ref": "#/definitions/rule-items"
        },
        "all": {
          "$ref": "#/definitions/rule-items"
        },
        "disabled": {
          "type": "boolean"
        }
      }
    },
    "session-input": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "project": {
          "type": "string"
        },
        "uid": {
          "type": "string"
        },
        "timestamp": {
          "$ref": "#/definitions/container-timestamp"
        },
        "timezone": {
          "type": "string"
        },
        "subject": {
          "$ref": "#/definitions/subject-input"
        }
      },
      "additionalProperties": false
    },
    "session-metadata-input": {
      "type": "object",
      "properties": {
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string"
        },
        "info": {
          "type": "object"
        },
        "operator": {
          "type": "string"
        },
        "uid": {
          "type": "string"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "timezone": {
          "type": "string"
        },
        "subject": {
          "$ref": "#/definitions/subject-input"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-input"
          }
        }
      },
      "additionalProperties": false
    },
    "session-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "public": {
          "type": "boolean"
        },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "info": {
          "$ref": "#/definitions/container-info"
        },
        "info_exists": {
          "type": "boolean"
        },
        "operator": {
          "type": "string"
        },
        "project": {
          "type": "string"
        },
        "uid": {
          "type": "string"
        },
        "timestamp": {
          "$ref": "#/definitions/container-timestamp"
        },
        "timezone": {
          "type": "string"
        },
        "subject": {
          "$ref": "#/definitions/subject-output-default-required"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        },
        "permissions": {
          "$ref": "#/definitions/permission-output-list"
        },
        "group": {
          "type": "string",
          "maxLength": 64,
          "minLength": 2,
          "pattern": "^[0-9a-z][0-9a-z.@_-]{0,30}[0-9a-z]$"
        },
        "project_has_template": {
          "type": "boolean"
        },
        "satisfies_template": {
          "type": "boolean"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-output"
          }
        },
        "notes": {
          "$ref": "#/definitions/notes-list-output"
        },
        "tags": {
          "$ref": "#/definitions/tag-output-list"
        },
        "analyses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/analysis-output"
          }
        }
      },
      "additionalProperties": false
    },
    "session-jobs-output": {
      "type": "object",
      "properties": {
        "jobs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/job-output"
          }
        },
        "containers": {}
      },
      "additionalProperties": false
    },
    "session-template-recalc-output": {
      "type": "object",
      "properties": {
        "sessions_changed": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{24}$"
          }
        }
      },
      "additionalProperties": false,
      "required": [
        "sessions_changed"
      ]
    },
    "subject-age": {
      "type": "integer"
    },
    "subject-sex": {
      "enum": [
        "male",
        "female",
        "other",
        "unknown",
        null
      ]
    },
    "subject-race": {
      "enum": [
        "American Indian or Alaska Native",
        "Asian",
        "Native Hawaiian or Other Pacific Islander",
        "Black or African American",
        "White",
        "More Than One Race",
        "Unknown or Not Reported",
        null
      ]
    },
    "subject-ethnicity": {
      "enum": [
        "Not Hispanic or Latino",
        "Hispanic or Latino",
        "Unknown or Not Reported",
        null
      ]
    },
    "subject-tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "subject-input": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "firstname": {
          "type": "string",
          "maxLength": 64
        },
        "lastname": {
          "type": "string",
          "maxLength": 64
        },
        "age": {
          "$ref": "#/definitions/subject-age"
        },
        "sex": {
          "$ref": "#/definitions/subject-sex"
        },
        "race": {
          "$ref": "#/definitions/subject-race"
        },
        "ethnicity": {
          "$ref": "#/definitions/subject-ethnicity"
        },
        "code": {
          "type": "string",
          "maxLength": 64
        },
        "tags": {
          "$ref": "#/definitions/subject-tags"
        },
        "info": {
          "$ref": "#/definitions/common-info"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-input"
          }
        }
      },
      "additionalProperties": false
    },
    "subject-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        },
        "firstname": {
          "type": "string",
          "maxLength": 64
        },
        "lastname": {
          "type": "string",
          "maxLength": 64
        },
        "age": {
          "$ref": "#/definitions/subject-age"
        },
        "sex": {
          "$ref": "#/definitions/subject-sex"
        },
        "race": {
          "$ref": "#/definitions/subject-race"
        },
        "ethnicity": {
          "$ref": "#/definitions/subject-ethnicity"
        },
        "code": {
          "type": "string",
          "maxLength": 64
        },
        "tags": {
          "$ref": "#/definitions/subject-tags"
        },
        "info": {
          "$ref": "#/definitions/common-info"
        },
        "info_exists": {
          "type": "boolean"
        },
        "files": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/file-output"
          }
        }
      },
      "additionalProperties": false
    },
    "subject-output-default-required": {
      "allOf": [
        {
          "$ref": "#/definitions/subject-output"
        }
      ],
      "required": [
        "_id"
      ]
    },
    "tag": {
      "properties": {
        "value": {
          "type": "string",
          "minLength": 1,
          "maxLength": 32
        }
      },
      "additionalProperties": false,
      "required": [
        "value"
      ]
    },
    "tag-output-list": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/tag"
      }
    },
    "user-preferences": {
      "title": "Preferences",
      "type": "object"
    },
    "user-wechat": {},
    "user-api-key": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string"
        },
        "created": {
          "type": "string"
        },
        "last_used": {}
      },
      "additionalProperties": false
    },
    "user-input": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "email"
        },
        "firstname": {
          "maxLength": 64,
          "minLength": 1,
          "title": "First Name",
          "type": "string"
        },
        "lastname": {
          "maxLength": 64,
          "minLength": 1,
          "title": "Last Name",
          "type": "string"
        },
        "email": {
          "format": "email",
          "title": "Email",
          "type": "string"
        },
        "avatar": {
          "format": "uri",
          "title": "Avatar",
          "type": "string"
        },
        "avatars": {
          "$ref": "#/definitions/avatars"
        },
        "root": {
          "type": "boolean"
        },
        "disabled": {
          "type": "boolean"
        },
        "preferences": {
          "$ref": "#/definitions/user-preferences"
        },
        "wechat": {
          "$ref": "#/definitions/user-wechat"
        },
        "firstlogin": {
          "type": "string"
        },
        "lastlogin": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "user-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "email"
        },
        "firstname": {
          "maxLength": 64,
          "minLength": 1,
          "title": "First Name",
          "type": "string"
        },
        "lastname": {
          "maxLength": 64,
          "minLength": 1,
          "title": "Last Name",
          "type": "string"
        },
        "email": {
          "format": "email",
          "title": "Email",
          "type": "string"
        },
        "avatar": {
          "format": "uri",
          "title": "Avatar",
          "type": "string"
        },
        "avatars": {
          "$ref": "#/definitions/avatars"
        },
        "root": {
          "type": "boolean"
        },
        "disabled": {
          "type": "boolean"
        },
        "preferences": {
          "$ref": "#/definitions/user-preferences"
        },
        "wechat": {
          "$ref": "#/definitions/user-wechat"
        },
        "firstlogin": {
          "type": "string"
        },
        "lastlogin": {
          "type": "string"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "user-output-api-key": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "format": "email"
        },
        "api_key": {
          "$ref": "#/definitions/user-api-key"
        },
        "firstname": {
          "maxLength": 64,
          "minLength": 1,
          "title": "First Name",
          "type": "string"
        },
        "lastname": {
          "maxLength": 64,
          "minLength": 1,
          "title": "Last Name",
          "type": "string"
        },
        "email": {
          "format": "email",
          "title": "Email",
          "type": "string"
        },
        "avatar": {
          "format": "uri",
          "title": "Avatar",
          "type": "string"
        },
        "avatars": {
          "$ref": "#/definitions/avatars"
        },
        "root": {
          "type": "boolean"
        },
        "disabled": {
          "type": "boolean"
        },
        "preferences": {
          "$ref": "#/definitions/user-preferences"
        },
        "wechat": {
          "$ref": "#/definitions/user-wechat"
        },
        "firstlogin": {
          "type": "string"
        },
        "lastlogin": {
          "type": "string"
        },
        "created": {
          "type": "string"
        },
        "modified": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "_id",
        "firstname",
        "lastname",
        "root",
        "email",
        "created",
        "modified"
      ]
    },
    "version-output": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        },
        "database": {
          "type": "integer"
        }
      },
      "required": [
        "_id",
        "database"
      ]
    }
  }
}