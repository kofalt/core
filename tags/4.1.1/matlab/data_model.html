

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Model &mdash; Flywheel SDK  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../static/theme/sphinx_rtd/0.3.1/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/theme/sphinx_rtd/0.3.1/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Getting Started with Flywheel SDK" href="getting_started.html" /> 

  
  <script src="../../../static/theme/sphinx_rtd/0.3.1/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Flywheel SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started with Flywheel SDK</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hierarchy">Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#permissions">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#containers">Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#info">Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_views.html">Flywheel Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="flywheel.html">flywheel package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Flywheel SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Data Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-model">
<h1>Data Model<a class="headerlink" href="#data-model" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hierarchy">
<h2>Hierarchy<a class="headerlink" href="#hierarchy" title="Permalink to this headline">¶</a></h2>
<p>Data in a Flywheel system is organized in a tree-like hierarchy, as indicated in the following diagram.</p>
<img alt="../../../static/images/data-model.png" src="../../../static/images/data-model.png" />
<ul class="simple">
<li><code class="xref mat mat-class docutils literal notranslate"><span class="pre">User</span></code> - An authorized entity, usually referenced by email address.</li>
<li><code class="xref mat mat-class docutils literal notranslate"><span class="pre">Group</span></code> - A grouping of users and projects.</li>
<li><code class="xref mat mat-class docutils literal notranslate"><span class="pre">Project</span></code> - A project represents a grouping of subjects and sessions, e.g. within a study.</li>
<li><code class="xref mat mat-class docutils literal notranslate"><span class="pre">Subject</span></code> - An individual under study.</li>
<li><code class="xref mat mat-class docutils literal notranslate"><span class="pre">Session</span></code> - A grouping of acquired data, typically data acquired within a limited timeframe.</li>
<li><code class="xref mat mat-class docutils literal notranslate"><span class="pre">Acquisition</span></code> - A set of one or more files, typically acquired as part of the same process, at the same time.</li>
<li><code class="xref mat mat-class docutils literal notranslate"><span class="pre">AnalysisOutput</span></code> - A set of one or more derivative files from analyzing files after they have been acquired.</li>
</ul>
</div>
<div class="section" id="permissions">
<span id="data-model-permissions"></span><h2>Permissions<a class="headerlink" href="#permissions" title="Permalink to this headline">¶</a></h2>
<p>Permissions in Flywheel are managed at the Group and Project level. Users that belong to a Group or a Project have a
Role, which is one of:</p>
<ul class="simple">
<li><strong>Admin</strong> (<code class="docutils literal notranslate"><span class="pre">admin</span></code>) - Administrators can perform administrative-level actions such as setting permissions or creating and deleting projects.</li>
<li><strong>Read-Write</strong> (<code class="docutils literal notranslate"><span class="pre">rw</span></code>) - Users can read, create and delete data, but cannot assign permissions or delete entire projects.</li>
<li><strong>Read-Only</strong> (<code class="docutils literal notranslate"><span class="pre">ro</span></code>) - Users can only read data</li>
</ul>
<p>By default when a new Project is created belonging to a Group, permissions will be copied from the Group to the Project, keeping
user roles intact. From that point on, permissions for that Project must be managed at that project, changes made to the Group
will not propagate to the project.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">See</span> <span class="n">project</span> <span class="n">permissions</span>
<span class="n">project</span> <span class="p">=</span> <span class="n">fw</span><span class="p">.</span><span class="n">getProject</span><span class="p">(</span><span class="n">projectId</span><span class="p">);</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">project</span><span class="p">.</span><span class="n">permissions</span><span class="p">{</span><span class="mi">1</span><span class="p">});</span>

# <span class="n">Add</span> <span class="n">permission</span> <span class="n">to</span> <span class="n">a</span> <span class="n">project</span>
<span class="n">fw</span><span class="p">.</span><span class="n">addProjectPermission</span><span class="p">(</span><span class="n">projectId</span><span class="p">,</span> <span class="n">flywheel</span><span class="p">.</span><span class="n">model</span><span class="p">.</span><span class="n">Permission</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;justinehlert@flywheel.io&#39;</span><span class="p">,</span> <span class="s">&#39;access&#39;</span><span class="p">,</span> <span class="s">&#39;ro&#39;</span><span class="p">));</span>

# <span class="n">Remove</span> <span class="n">permission</span> <span class="n">from</span> <span class="n">a</span> <span class="n">project</span>
<span class="n">fw</span><span class="p">.</span><span class="n">deleteProjectUserPermission</span><span class="p">(</span><span class="n">projectId</span><span class="p">,</span> <span class="s">&#39;justinehlert@flywheel.io&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="containers">
<span id="data-model-containers"></span><h2>Containers<a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h2>
<p>Projects, Subjects, Sessions, Acquisitions and Analyses are all different types of <em>Containers</em>. Containers in Flywheel all support
the following features:</p>
<div class="section" id="tags">
<h3>Tags<a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h3>
<p>Tags are concise labels that provide descriptive metadata that can be searched on. Available tags are managed on the Group.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">See</span> <span class="n">tags</span> <span class="n">on</span> <span class="n">a</span> <span class="n">session</span>
<span class="n">session</span> <span class="p">=</span> <span class="n">fw</span><span class="p">.</span><span class="n">getSession</span><span class="p">(</span><span class="n">sessionId</span><span class="p">);</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;%s\n&#39;</span><span class="p">,</span> <span class="n">strjoin</span><span class="p">(</span><span class="n">session</span><span class="p">.</span><span class="n">tags</span><span class="p">,</span> <span class="s">&#39;, &#39;</span><span class="p">));</span>

# <span class="n">Add</span> <span class="n">a</span> <span class="n">tag</span> <span class="n">to</span> <span class="n">a</span> <span class="n">session</span>
<span class="n">fw</span><span class="p">.</span><span class="n">addSessionTag</span><span class="p">(</span><span class="n">sessionId</span><span class="p">,</span> <span class="s">&#39;Control&#39;</span><span class="p">);</span>

# <span class="n">Remove</span> <span class="n">a</span> <span class="n">tag</span> <span class="n">from</span> <span class="n">a</span> <span class="n">session</span>
<span class="n">fw</span><span class="p">.</span><span class="n">deleteSessionTag</span><span class="p">(</span><span class="n">sessionId</span><span class="p">,</span> <span class="s">&#39;Analysis Required&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h3>
<p>Notes are user-entered, human readable metadata attached to a container. They are timestamped and attributed to the user that entered them.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">See</span> <span class="n">notes</span> <span class="n">on</span> <span class="n">a</span> <span class="n">session</span>
<span class="n">session</span> <span class="p">=</span> <span class="n">fw</span><span class="p">.</span><span class="n">getSession</span><span class="p">(</span><span class="n">sessionId</span><span class="p">);</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">session</span><span class="p">.</span><span class="n">notes</span><span class="p">{</span><span class="mi">1</span><span class="p">});</span>

# <span class="n">Add</span> <span class="n">a</span> <span class="n">note</span> <span class="n">to</span> <span class="n">a</span> <span class="n">session</span>
<span class="n">fw</span><span class="p">.</span><span class="n">addSessionNote</span><span class="p">(</span><span class="n">sessionId</span><span class="p">,</span> <span class="s">&#39;This is a note&#39;</span><span class="p">);</span>

# <span class="n">Delete</span> <span class="n">a</span> <span class="n">note</span> <span class="n">from</span> <span class="n">a</span> <span class="n">session</span>
<span class="n">fw</span><span class="p">.</span><span class="n">deleteSessionNote</span><span class="p">(</span><span class="n">sessionId</span><span class="p">,</span> <span class="n">session</span><span class="p">.</span><span class="n">notes</span><span class="p">{</span><span class="mi">1</span><span class="p">}.</span><span class="n">id</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="info">
<h3>Info<a class="headerlink" href="#info" title="Permalink to this headline">¶</a></h3>
<p>Info is free-form JSON metadata associated with a container or file.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">Print</span> <span class="n">the</span> <span class="n">info</span> <span class="k">for</span> <span class="n">an</span> <span class="n">acquisition</span>
<span class="n">acquisition</span> <span class="p">=</span> <span class="n">fw</span><span class="p">.</span><span class="n">getAcquisition</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">);</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">acquisition</span><span class="p">.</span><span class="n">info</span><span class="p">);</span>

# <span class="n">Replace</span> <span class="n">the</span> <span class="n">entire</span> <span class="n">contents</span> <span class="n">of</span> <span class="n">acquisition</span> <span class="n">info</span>
<span class="n">fw</span><span class="p">.</span><span class="n">replaceAcquisitionInfo</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">,</span> <span class="n">struct</span><span class="p">(</span><span class="s">&#39;splines&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">));</span>

# <span class="n">Add</span> <span class="n">additional</span> <span class="n">fields</span> <span class="n">to</span> <span class="n">acquisition</span> <span class="n">info</span>
<span class="n">fw</span><span class="p">.</span><span class="n">setAcquisitionInfo</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">,</span> <span class="n">struct</span><span class="p">(</span><span class="s">&#39;curve&#39;</span><span class="p">,</span> <span class="s">&#39;bezier&#39;</span><span class="p">));</span>

# <span class="n">Delete</span> <span class="n">fields</span> <span class="n">from</span> <span class="n">acquisition</span> <span class="n">info</span>
<span class="n">fw</span><span class="p">.</span><span class="n">deleteAcquisitionInfoFields</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">,</span> <span class="p">{{</span><span class="s">&#39;splines&#39;</span><span class="p">;</span> <span class="s">&#39;bezier&#39;</span><span class="p">}});</span>
</pre></div>
</div>
</div>
<div class="section" id="files">
<h3>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<p>Files are a set of file attachments associated with a container. See also <a class="reference internal" href="getting_started.html#dealing-with-files"><span class="std std-ref">Dealing with Files</span></a>.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">List</span> <span class="n">files</span> <span class="n">on</span> <span class="n">an</span> <span class="n">acquisition</span>
<span class="n">acquisition</span> <span class="p">=</span> <span class="n">fw</span><span class="p">.</span><span class="n">getAcquisition</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">);</span>

<span class="k">for</span> <span class="n">idx</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="nb">numel</span><span class="p">(</span><span class="n">acquisition</span><span class="p">.</span><span class="n">files</span><span class="p">)</span>
  <span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;Name: %s, type: %s\n&#39;</span><span class="p">,</span> <span class="n">acquisition</span><span class="p">.</span><span class="n">files</span><span class="p">{</span><span class="n">idx</span><span class="p">}.</span><span class="n">name</span><span class="p">,</span> <span class="n">acquisition</span><span class="p">.</span><span class="n">files</span><span class="p">{</span><span class="n">idx</span><span class="p">}.</span><span class="n">type</span><span class="p">);</span>
<span class="k">end</span>

# <span class="n">Upload</span> <span class="n">a</span> <span class="n">file</span> <span class="n">to</span> <span class="n">an</span> <span class="n">acquisition</span>
<span class="n">fw</span><span class="p">.</span><span class="n">uploadFileToAcquisition</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">,</span> <span class="s">&#39;/path/to/file.txt&#39;</span><span class="p">);</span>

# <span class="n">Download</span> <span class="n">a</span> <span class="n">file</span> <span class="n">to</span> <span class="n">disk</span>
<span class="n">fw</span><span class="p">.</span><span class="n">downloadFileFromAcquisition</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">,</span> <span class="s">&#39;file.txt&#39;</span><span class="p">,</span> <span class="s">&#39;/path/to/file.txt&#39;</span><span class="p">);</span>

# <span class="n">Files</span> <span class="n">can</span> <span class="n">also</span> <span class="n">have</span> <span class="n">metadata</span>
<span class="nb">disp</span><span class="p">(</span><span class="n">acquisition</span><span class="p">.</span><span class="n">files</span><span class="p">{</span><span class="mi">1</span><span class="p">}.</span><span class="n">info</span><span class="p">);</span>

<span class="n">fw</span><span class="p">.</span><span class="n">replaceAcquisitionFileInfo</span><span class="p">(</span><span class="n">acquisitionId</span><span class="p">,</span> <span class="s">&#39;file.txt&#39;</span><span class="p">,</span> <span class="n">struct</span><span class="p">(</span><span class="s">&#39;wordCount&#39;</span><span class="p">,</span> <span class="mi">327</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral" title="Getting Started with Flywheel SDK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 Flywheel All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../static/theme/sphinx_rtd/0.3.1/jquery.js"></script>
      <script type="text/javascript" src="../../../static/theme/sphinx_rtd/0.3.1/underscore.js"></script>
      <script type="text/javascript" src="../../../static/theme/sphinx_rtd/0.3.1/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../static/theme/sphinx_rtd/0.3.1/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>